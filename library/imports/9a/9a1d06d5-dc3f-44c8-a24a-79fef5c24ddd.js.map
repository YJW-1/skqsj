{"version":3,"sources":["assets\\script\\Game\\propRocket2.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { tag } from \"../Framework/Constant\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class propRocket extends cc.Component {\r\n\r\n    isDis: boolean = false;\r\n\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if (this.isDis) return\r\n        // cc.log(other.tag)\r\n        if (cocosz.sceneMgr.sceneName == \"rewardLevel2\") {\r\n            if (other.tag == tag.honeybee) {\r\n\r\n                // this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n                // }, 0.1)\r\n                // other.node.destroy();\r\n                let prefab = cocosz.resMgr.getRes(\"rocketEffect2\", cc.Prefab);\r\n                let node = cc.instantiate(prefab);\r\n                other.node.parent.addChild(node);\r\n                node.setPosition(other.node.getPosition());\r\n            }\r\n\r\n            contact.disabled = true;\r\n            return;\r\n        }\r\n        if (other.tag == tag.stone || other.tag == tag.stone3 || other.tag == tag.rocket || other.tag == tag.wooldenBox2 || (other.tag == tag.thorn && cocosz.dataMgr.CurLevelId == 104)) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n\r\n            // this.scheduleOnce(() => {\r\n            // }, 0.1)\r\n            this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0);\r\n            other.node.destroy();\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            other.node.parent.addChild(node);\r\n            node.setPosition(other.node.getPosition());\r\n            this.node.destroy();\r\n        }\r\n        else if (other.tag == tag.bat) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0);\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.1)\r\n            other.node.destroy();\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            other.node.parent.addChild(node);\r\n            node.setPosition(other.node.getPosition());\r\n        }\r\n        else if (other.tag == tag.thorn) {\r\n            // this.isDis = true;\r\n            // cocosz.audioMgr.playRocketEffect2();\r\n            // this.scheduleOnce(() => {\r\n            //     this.node.destroy();\r\n            // }, 0.1)\r\n            // other.node.destroy();\r\n            // let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            // let node = cc.instantiate(prefab);\r\n            // this.node.parent.addChild(node);\r\n            // node.setPosition(this.node.getPosition());\r\n            other.node.destroy();\r\n            contact.disabled = true;\r\n        }\r\n        else if (other.tag == tag.balloon || other.tag == tag.balloon2) {\r\n            if (other.node.parent != \"prop\") {\r\n                other.node.parent.destroy()\r\n            }\r\n        }\r\n        else if (other.tag == tag.rope) {\r\n            contact.disabled = true;\r\n        }\r\n        else if (other.tag == tag.player) {\r\n            let node = other.node;\r\n            let parent = node.parent;\r\n            contact.disabled = true;\r\n            if (parent.name != \"role\") {\r\n                parent = parent.parent;\r\n            }\r\n            if (parent.name != \"role\") {\r\n                parent = parent.parent;\r\n            }\r\n            for (let child of node.parent.children) {\r\n                if (child.name == \"right_balloon\" || child.name == \"left_balloon\") continue;\r\n                child.color = cc.color(0, 0, 0, 255);\r\n                for (let child2 of child.children) {\r\n                    child2.color = cc.color(0, 0, 0, 255);\r\n                    if (child.children.length > 0) {\r\n                        for (let child3 of child2.children) {\r\n                            child3.color = cc.color(0, 0, 0, 255);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node2 = cc.instantiate(prefab);\r\n            this.node.parent.addChild(node2);\r\n            // cc.log(this.node.x,this.node.y)\r\n            node2.setPosition(cc.v2(this.node.x, this.node.y));\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.01)\r\n            cc.game.emit(Constant.E_GAME_FAID)\r\n        }\r\n        else if (other.tag == 0 || other.tag == 7) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.1)\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            this.node.parent.addChild(node);\r\n            node.setPosition(this.node.getPosition());\r\n        }\r\n        else if (other.tag == tag.bigFan) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.01)\r\n            let script = other.node.getComponent(\"propBigFan\");\r\n            script.onDamaged();\r\n\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            other.node.parent.addChild(node);\r\n            node.setPosition(other.node.getPosition());\r\n        }\r\n        else if (other.tag == tag.rocketFloor) {\r\n            // cc.log(\"--------------------10\")\r\n            contact.disabled = true;\r\n        }\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        // this.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n        //     cocosz.audioMgr.playRocketEffect1();\r\n        //     let rb = this.node.getComponent(cc.RigidBody);\r\n        //     let v = rb.linearVelocity;\r\n        //     let direction = this.node.parent.angle == 0 ? 1 : -1\r\n        //     v.x = 700 * direction;\r\n        //     rb.linearVelocity = v;\r\n        //     this.node.off(cc.Node.EventType.TOUCH_START);\r\n        // })\r\n        this.scheduleOnce(() => {\r\n            let rb = this.node.getComponent(cc.RigidBody);\r\n            if (!rb) return;\r\n            this.node.destroy()\r\n        }, 4)\r\n    }\r\n\r\n    update(dt) {\r\n        // if (cocosz.sceneMgr.sceneName == \"rewardLevel2\") {\r\n        //     // cc.log(this.node.y)\r\n        //     if (this.node.y > 20) {\r\n        //         cc.log(\"---------------销毁\")\r\n        //         this.node.destroy();\r\n        //     }\r\n        // }\r\n        // if (cocosz.gameMgr.isGameOver) {\r\n        //     this.unscheduleAllCallbacks()\r\n        // }\r\n    }\r\n}\r\n"]}