{"version":3,"sources":["assets\\script\\ysqszc\\game2.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { timeStamp } from \"console\";\r\nimport { O_CREAT } from \"constants\";\r\nimport { chdir } from \"process\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant from \"../Framework/Constant\";\r\nimport { uiGame } from \"../Ui/UiGame\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class game2 extends cc.Component {\r\n    @property(cc.Node)\r\n    camera: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    ui: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    gameBg: cc.Node = null;\r\n\r\n\r\n    @property(cc.Node)\r\n    startGame: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    listen: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    handTips: cc.Node = null;\r\n\r\n\r\n    @property(cc.Node)\r\n    stone: cc.Node = null;\r\n\r\n    handStartPos: any = null;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        // this.schedule(() => {\r\n        // let stone = cocosz.resMgr.getRes(\"stone\", cc.Prefab);\r\n        // let node = cc.instantiate(stone);\r\n        // node.setPosition(cc.v2(0, 0))\r\n        // node.getComponent(cc.RigidBody).gravityScale = 0;\r\n        // this.node.addChild(node);\r\n        // }, 2)\r\n\r\n\r\n\r\n        cc.log(cocosz.dataMgr.isNovice, \"cocosz.dataMgr.isNovice\");\r\n\r\n        // if (+cocosz.dataMgr.isNovice == 0) {\r\n        this.startGame.getComponent(cc.Label).string = \"       向指示方向滑动\";\r\n        this.handStartPos = this.handTips.getPosition();\r\n        cc.tween(this.handTips)\r\n            .repeatForever(\r\n                cc.tween().sequence(\r\n                    cc.tween().call(() => {\r\n\r\n                        this.handTips.setPosition(this.handStartPos);\r\n                    }),\r\n                    cc.tween().to(0.3, { opacity: 255 }),\r\n                    cc.tween().by(1, { x: -150 }),\r\n                    cc.tween().to(0.3, { opacity: 0 }),\r\n                    cc.tween().delay(2)\r\n\r\n\r\n                )\r\n            )\r\n            .start()\r\n        // }\r\n\r\n        // else {\r\n        //     this.handTips.active = false;\r\n        //     this.stone.active = false;\r\n        // }\r\n        if (cocosz.gameMgr.isGame2Resurrection) {\r\n            cocosz.gameMgr.isGame2Resurrection = false;\r\n        }\r\n        else {\r\n            cocosz.gameMgr.curGame2LevelID = 0;\r\n\r\n        }\r\n\r\n        cc.game.on(Constant.E_GAME_START, () => {\r\n            window.onGameEvent(4, \"无尽关卡开始\",);\r\n\r\n            // if (+cocosz.dataMgr.isNovice == 0) {\r\n            cocosz.dataMgr.isNovice = \"1\";\r\n            this.handTips.active = false;\r\n            // }\r\n            this.listen.active = false\r\n            this.startGame.active = false;\r\n            uiGame.onStartGame()\r\n            let num = Math.floor(Math.random() * 20) + 1;\r\n\r\n            num = cocosz.dataMgr.Game2LevelList;\r\n            cocosz.gameMgr.curLevelJson = num;\r\n            cc.log(num);\r\n\r\n            let prefab = cocosz.resMgr.getRes(\"levelMgr\", cc.Prefab);\r\n\r\n            let level = cc.instantiate(prefab);\r\n            level.getComponent(\"levelNum\").curLevel = num;\r\n            this.node.addChild(level);\r\n\r\n            cocosz.gameMgr.curGame2LevelID++;\r\n            this.ui.y = this.camera.y;\r\n            this.gameBg.y = this.camera.y;\r\n\r\n\r\n            this.schedule(() => {\r\n                cocosz.gameMgr.curGame2LevelID++;\r\n                let num = Math.floor(Math.random() * 20) + 1;\r\n\r\n                num = cocosz.dataMgr.Game2LevelList;\r\n\r\n                cocosz.gameMgr.curLevelJson = num;\r\n                cc.log(num)\r\n                let prefab = cocosz.resMgr.getRes(\"levelMgr\", cc.Prefab);\r\n\r\n                let level = cc.instantiate(prefab);\r\n                level.getComponent(\"levelNum\").curLevel = num;\r\n                this.node.addChild(level);\r\n            }, 18)\r\n\r\n\r\n\r\n            cc.game.off(Constant.E_GAME_START)\r\n        }, this)\r\n        cc.tween(this.startGame)\r\n            .repeatForever(\r\n                cc.tween().sequence(\r\n                    cc.tween().by(0.3, { scale: 0.1 }),\r\n                    cc.tween().by(0.3, { scale: -0.1 })\r\n                )\r\n            )\r\n            .start()\r\n\r\n    }\r\n\r\n    update(dt) {\r\n        if (cocosz.gameMgr.isGameOver) {\r\n            // for (let child of this.node.children) {\r\n            //     if (child.name == \"levelMgr\") {\r\n            //         child.destroy();\r\n            //     }\r\n            // }\r\n            this.unscheduleAllCallbacks();\r\n            return\r\n        }\r\n    }\r\n}\r\n"]}