{"version":3,"sources":["assets\\script\\Game\\moveFloor.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport { tag } from \"../Framework/Constant\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n    selelt: cc.Node = null;\r\n    default: cc.Node = null;\r\n    notStop: cc.Node = null;\r\n\r\n    tagList: any = [];\r\n\r\n    isFirst: boolean = true;\r\n\r\n    isEnd: boolean = false;\r\n\r\n\r\n    onBeginContact(contact, self, other) {\r\n        // if (this.default.active == true) return;\r\n        // if (this.selelt.active == false) return;\r\n        if (other.tag == tag.thorn || other.tag == tag.invisibleFloor) {\r\n            contact.disabled = true;\r\n            return\r\n        }\r\n        if (this.isEnd) return;\r\n\r\n        contact.disabled = true;\r\n        // if (this.isFirst) {\r\n        //     this.isFirst = false;\r\n        //     return\r\n        // }\r\n        // cc.log(other.tag);\r\n        for (let idx of this.tagList) {\r\n            if (idx.tag == other.tag) {\r\n                return;\r\n            }\r\n        }\r\n        this.tagList.push(other);\r\n        // cc.log(this.tagList);\r\n\r\n        // if (this.tagList.length > 1) {\r\n        this.notStop.active = true;\r\n        this.node.color = cc.color(255, 0, 0, 150);\r\n        // }\r\n        if (this.tagList.length == 1 && (this.tagList[0].tag == tag.wooldenBox || this.tagList[0].tag == 81)) {\r\n            if (this.tagList[0].node.name == \"wooldenBox11\" && cocosz.dataMgr.CurLevelId == 52) return;\r\n            this.notStop.active = false;\r\n            this.node.color = cc.color(255, 255, 255, 255);\r\n        }\r\n    }\r\n\r\n    onEndContact(contact, self, other) {\r\n        if (other.tag == tag.thorn) return\r\n        if (this.isEnd) return;\r\n        let list = [];\r\n        for (let idx of this.tagList) {\r\n            if (idx.tag == other.tag) continue;\r\n            list.push(idx);\r\n        }\r\n        this.tagList = list;\r\n\r\n        this.notStop.active = true;\r\n        this.node.color = cc.color(255, 0, 0, 150);\r\n\r\n        if (this.tagList.length == 1 && (this.tagList[0].tag == tag.wooldenBox || this.tagList[0].tag == 81)) {\r\n            if (this.tagList[0].node.name == \"wooldenBox11\" && cocosz.dataMgr.CurLevelId == 52) return;\r\n            this.notStop.active = false;\r\n            this.node.color = cc.color(255, 255, 255, 255);\r\n        }\r\n\r\n\r\n        // cc.log(this.tagList, \"----------onEndContact\");\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.default = this.node.getChildByName(\"default\");\r\n        this.selelt = this.node.getChildByName(\"selelt\");\r\n        this.notStop = this.node.getChildByName(\"notStop\");\r\n\r\n        let circle = null;\r\n        if (this.node.name == \"moveFloor2\" || this.node.name == \"moveFloor4\") {\r\n            circle = this.node.getComponent(cc.PhysicsBoxCollider);\r\n        }\r\n        else if (this.node.name == \"moveFloor1\") {\r\n            circle = this.node.getComponent(cc.PhysicsCircleCollider);\r\n        }\r\n        else if (this.node.name == \"moveFloor3\" || this.node.name == \"moveFloor5\") {\r\n            circle = this.node.getComponent(cc.PhysicsPolygonCollider);\r\n        }\r\n        circle.enabled = false;\r\n    }\r\n\r\n    start() {\r\n        this.node.zIndex += 1001;\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.default.active = false;\r\n\r\n            this.notStop.active = true;\r\n            this.node.color = cc.color(255, 0, 0, 150);\r\n\r\n            let circle = null;\r\n            if (this.node.name == \"moveFloor2\" || this.node.name == \"moveFloor4\") {\r\n                circle = this.node.getComponent(cc.PhysicsBoxCollider);\r\n            }\r\n            else if (this.node.name == \"moveFloor1\") {\r\n                circle = this.node.getComponent(cc.PhysicsCircleCollider);\r\n            }\r\n            else if (this.node.name == \"moveFloor3\" || this.node.name == \"moveFloor5\") {\r\n                circle = this.node.getComponent(cc.PhysicsPolygonCollider);\r\n            }\r\n\r\n            circle.enabled = true;\r\n        }, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, (touch: cc.Touch) => {\r\n            let pos = touch.getDelta();\r\n            this.node.x += pos.x;\r\n            this.node.y += pos.y;\r\n            // cc.log(pos.x, pos.y, \"---------\")\r\n            // let v = this.node.getComponent(cc.RigidBody).linearVelocity;\r\n            // v.x += pos.x * 10;\r\n            // v.y += pos.y * 10;\r\n            // this.node.getComponent(cc.RigidBody).linearVelocity = v;\r\n        }, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_END, () => {\r\n            // cc.log(this.tagList);\r\n            if (this.tagList.length == 1 && (this.tagList[0].tag == tag.wooldenBox || this.tagList[0].tag == 81)) {\r\n                if (this.tagList[0].node.name == \"wooldenBox11\" && cocosz.dataMgr.CurLevelId == 52) return;\r\n                this.node.targetOff(this);\r\n                this.isEnd = true;\r\n\r\n                this.node.color = cc.color(255, 255, 255, 255);\r\n\r\n                let weld = null;\r\n                if (this.tagList[0].node.name == \"wooldenBox12\") {\r\n                    cc.log(\"------------------this.\")\r\n                    weld = this.node.addComponent(cc.RevoluteJoint);\r\n                }\r\n                else {\r\n                    weld = this.node.addComponent(cc.WeldJoint);\r\n                }\r\n                weld.connectedBody = this.tagList[0].node.getComponent(cc.RigidBody);\r\n                // cc.log(this.tagList[0].node.scaleX, this.tagList[0].node.scaleY)\r\n                // weld.connectedAnchor.x = (this.node.x - this.tagList[0].node.x) / this.tagList[0].node.scaleX;\r\n\r\n                // weld.connectedAnchor.y = (this.node.y - this.tagList[0].node.y) / this.tagList[0].node.scaleY;\r\n                weld.connectedAnchor.x = (this.node.x - this.tagList[0].node.x);\r\n\r\n                weld.connectedAnchor.y = (this.node.y - this.tagList[0].node.y);\r\n                if (this.node.name == \"moveFloor5\") {\r\n                    // weld.connectedAnchor.x = 0\r\n                    // weld.connectedAnchor.y = 0\r\n\r\n                    // weld.anchor.x = (this.node.x - this.tagList[0].node.x);\r\n                    // weld.anchor.y = (this.node.y - this.tagList[0].node.y);\r\n                }\r\n\r\n                weld.apply();\r\n                // cc.log(this.tagList[0].node)\r\n\r\n                let rb = this.node.getComponent(cc.RigidBody);\r\n                rb.type = cc.RigidBodyType.Dynamic;\r\n                let circle = null;\r\n                if (this.node.name == \"moveFloor2\" || this.node.name == \"moveFloor4\") {\r\n                    circle = this.node.getComponent(cc.PhysicsBoxCollider);\r\n                }\r\n                else if (this.node.name == \"moveFloor1\") {\r\n                    circle = this.node.getComponent(cc.PhysicsCircleCollider);\r\n                }\r\n                else if (this.node.name == \"moveFloor3\" || this.node.name == \"moveFloor5\") {\r\n                    circle = this.node.getComponent(cc.PhysicsPolygonCollider);\r\n                }\r\n\r\n                this.selelt.active = false;\r\n                rb.gravityScale = 2;\r\n                if (this.node.name == \"moveFloor5\") {\r\n                    rb.gravityScale = 1;\r\n                }\r\n                if (cocosz.dataMgr.CurLevelId == 113 || cocosz.dataMgr.CurLevelId == 115) {\r\n                    rb.gravityScale = 0;\r\n                }\r\n                circle.apply();\r\n                if (this.node.name == \"moveFloor5\") return;\r\n\r\n                if (cocosz.dataMgr.CurLevelId == 113) {\r\n                    return;\r\n                }\r\n                this.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n                    this.node.destroy();\r\n                    cocosz.audioMgr.playBoxEffect();\r\n                    let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n                    let node = cc.instantiate(prefab);\r\n                    this.node.parent.addChild(node);\r\n                    node.setPosition(this.node.getPosition());\r\n                })\r\n            }\r\n\r\n\r\n        }, this)\r\n    }\r\n\r\n    update(dt) {\r\n        if (this.node.y >= 500) {\r\n            this.node.destroy();\r\n        }\r\n    }\r\n}\r\n"]}