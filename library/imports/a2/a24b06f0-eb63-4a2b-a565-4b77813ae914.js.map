{"version":3,"sources":["assets\\script\\Game\\propCacTus.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport { tag } from \"../Framework/Constant\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class propCacTus extends cc.Component {\r\n\r\n    hand1: cc.Node = null;\r\n    hand2: cc.Node = null;\r\n\r\n    l1: cc.Node = null;\r\n    isDes: boolean = false;\r\n\r\n    action: any = null;\r\n\r\n    isAction: boolean = false;\r\n\r\n    angle: any = null;\r\n\r\n\r\n\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if (other.tag == tag.thorn && (this.node.name == \"cactus3\" || this.node.name == \"cactus2\")) {\r\n            if (this.node.parent.name == \"rewardLevel\") {\r\n                contact.disabled = true;\r\n                return\r\n            }\r\n\r\n            let rb = this.l1.getComponent(cc.RigidBody);\r\n            let v = this.l1.getComponent(cc.RigidBody).linearVelocity;\r\n            v.x = 50;\r\n            rb.linearVelocity = v;\r\n        }\r\n        else if (other.tag == tag.bigFan) {\r\n            if (this.isDes) return;\r\n            this.isDes = true;\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.3)\r\n        }\r\n\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onDestroy() {\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n\r\n    onLoad() {\r\n        if (this.node.name == \"cactus3\" || this.node.name == \"cactus2\") {\r\n\r\n            this.hand1 = this.node.getChildByName(\"scale\").getChildByName(\"hand1\");\r\n            this.hand2 = this.node.getChildByName(\"scale\").getChildByName(\"hand2\");\r\n            this.l1 = this.node.getChildByName(\"l1\");\r\n        }\r\n        else if (this.node.name == \"cactus5\") {\r\n            this.hand1 = this.node.getChildByName(\"sp\").getChildByName(\"hand1\");\r\n            this.hand2 = this.node.getChildByName(\"sp\").getChildByName(\"hand2\");\r\n        }\r\n        else {\r\n            this.hand1 = this.node.getChildByName(\"hand1\");\r\n            this.hand2 = this.node.getChildByName(\"hand2\");\r\n        }\r\n    }\r\n\r\n\r\n    onThorn() {\r\n\r\n        let prefab = cocosz.resMgr.getRes(\"thorn\", cc.Prefab);\r\n        let node = cc.instantiate(prefab);\r\n\r\n        let hd = this.angle / 180 * Math.PI;\r\n        // cc.log(this.angle);\r\n        node.y = Math.random() * 12 - 6 - 10;\r\n        node.x = 30;\r\n        node.angle = this.angle;\r\n        node.scale = 1.5;\r\n        this.node.addChild(node);\r\n        let rb = node.getComponent(cc.RigidBody);\r\n        let v = rb.linearVelocity;\r\n\r\n        // this.angle = Math.ceil(hd / Math.PI * 180);\r\n        // cc.log(Math.sin(hd), Math.cos(hd))\r\n        v.x = 700 * Math.cos(hd);\r\n        v.y = 700 * Math.sin(hd);\r\n        rb.linearVelocity = v;\r\n        cocosz.audioMgr.playmCactusEffect2()\r\n\r\n        this.isAction = false;\r\n    }\r\n\r\n\r\n    start() {\r\n\r\n\r\n        // let rb = this.l1.getComponent(cc.RigidBody);\r\n        // let v = this.l1.getComponent(cc.RigidBody).linearVelocity;\r\n        // v.x = 100;\r\n        // rb.linearVelocity = v;\r\n\r\n\r\n        if (this.node.parent.name == \"rewardLevel\") {\r\n\r\n            let a = cc.tween().sequence(\r\n                cc.tween().call(() => {\r\n                    this.isAction = true;\r\n                    cc.tween(this.hand2)\r\n                        .by(0.03, { position: cc.v2(4, 0) })\r\n                        .by(0.03, { position: cc.v2(-4, 0) })\r\n                        .start()\r\n                    cc.tween(this.hand1)\r\n                        .by(0.03, { position: cc.v2(-4, 0) })\r\n                        .by(0.03, { position: cc.v2(4, 0) })\r\n                        .start()\r\n                }),\r\n                cc.tween().delay(0.12),\r\n                cc.tween().call(() => {\r\n                    this.onThorn();\r\n                })\r\n\r\n\r\n            )\r\n\r\n            // this.action = cc.tween(this.node)\r\n            //     .repeatForever(a)\r\n            //     .start()\r\n\r\n            this.schedule(() => {\r\n\r\n                this.action = cc.tween(this.node)\r\n                    .call(() => {\r\n                        this.isAction = true;\r\n                        cc.tween(this.hand2)\r\n                            .by(0.03, { position: cc.v2(4, 0) })\r\n                            .by(0.03, { position: cc.v2(-4, 0) })\r\n                            .start()\r\n                        cc.tween(this.hand1)\r\n                            .by(0.03, { position: cc.v2(-4, 0) })\r\n                            .by(0.03, { position: cc.v2(4, 0) })\r\n                            .start()\r\n                    })\r\n                    .delay(0.12)\r\n                    .call(() => {\r\n                        this.onThorn();\r\n                    })\r\n                    .start()\r\n            }, 0.15)\r\n\r\n            this.scheduleOnce(() => {\r\n                this.unscheduleAllCallbacks()\r\n            }, 25)\r\n\r\n\r\n\r\n\r\n\r\n            this.node.parent.on(cc.Node.EventType.TOUCH_MOVE, ((touch: cc.Touch) => {\r\n                if (cocosz.gameMgr.isGameOver) return;\r\n                if (this.isAction) return;\r\n\r\n                let pp = touch.getLocation();\r\n\r\n                let pos2 = this.node.parent.convertToNodeSpaceAR(pp);\r\n                let pos = cc.v2(499 + pos2.x, pos2.y);\r\n\r\n\r\n\r\n                let hd = pos.signAngle(cc.v2(100, 0));\r\n\r\n                this.angle = -hd / Math.PI * 180;\r\n                this.angle = this.angle > 80 ? 80 : this.angle;\r\n                // cc.log(this.angle);\r\n                // this.action.start();\r\n            }))\r\n            this.node.parent.on(cc.Node.EventType.TOUCH_START, ((touch: cc.Touch) => {\r\n                if (cocosz.gameMgr.isGameOver) return;\r\n                if (this.isAction) return;\r\n\r\n                let pp = touch.getLocation();\r\n\r\n                let pos2 = this.node.parent.convertToNodeSpaceAR(pp);\r\n                let pos = cc.v2(499 + pos2.x, pos2.y);\r\n\r\n\r\n\r\n                let hd = pos.signAngle(cc.v2(100, 0));\r\n\r\n                this.angle = -hd / Math.PI * 180;\r\n                this.angle = this.angle > 80 ? 80 : this.angle;\r\n\r\n\r\n                // this.action.start();\r\n            }))\r\n            return;\r\n        }\r\n\r\n\r\n\r\n        let a = cc.tween().sequence(\r\n            cc.tween().by(0.2, { position: cc.v2(-4, 0) }),\r\n            cc.tween().by(0.2, { position: cc.v2(4, 0) })\r\n        )\r\n        cc.tween(this.hand1)\r\n            .repeatForever(a)\r\n            .start()\r\n\r\n\r\n\r\n        let b = cc.tween().sequence(\r\n            cc.tween().by(0.2, { position: cc.v2(4, 0) }),\r\n            cc.tween().by(0.2, { position: cc.v2(-4, 0) })\r\n        )\r\n        cc.tween(this.hand2)\r\n            .repeatForever(b)\r\n            .start()\r\n\r\n\r\n        this.schedule(() => {\r\n            let prefab = cocosz.resMgr.getRes(\"thorn\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            node.zIndex -= 1009;\r\n            // if (this.node.y >= 1000 || this.node.y <= -1000) {\r\n            //     this.node.destroy();\r\n            // }\r\n            if (cocosz.dataMgr.CurLevelId == 136 && cocosz.gameMgr.surplusLevelNum > 0) return\r\n            if (this.node.name == \"cactus3\" || this.node.name == \"cactus2\") {\r\n\r\n                node.y = Math.random() * 12 - 6 - 10;\r\n                node.x = -30;\r\n                node.angle = 180;\r\n                this.node.getChildByName(\"scale\").addChild(node);\r\n                let rb = node.getComponent(cc.RigidBody);\r\n                let v = rb.linearVelocity;\r\n                let angle = Math.PI / 180 * this.node.angle;\r\n                let sin = Math.sin(angle);\r\n                let cos = Math.cos(angle);\r\n                // cc.log(sin,cos,this.node.angle)\r\n                cocosz.audioMgr.playmCactusEffect2()\r\n                v.x = -700 * cos;\r\n                v.y = -700 * sin;\r\n                rb.linearVelocity = v;\r\n            }\r\n            else {\r\n                node.y = Math.random() * 12 - 6 - 10;\r\n                node.x = 30;\r\n                this.node.addChild(node);\r\n                let rb = node.getComponent(cc.RigidBody);\r\n                let v = rb.linearVelocity;\r\n                v.x = 700 * this.node.scaleX / Math.abs(this.node.scaleX);\r\n                rb.linearVelocity = v;\r\n                cocosz.audioMgr.playmCactusEffect2()\r\n            }\r\n        }, 0.1)\r\n    }\r\n\r\n    update(dt) {\r\n        // let rb = this.node.getComponent(cc.RigidBody)\r\n        // let v = rb.linearVelocity;\r\n        // v.x = 50;\r\n        // rb.linearVelocity = v;\r\n        // if (this.node.x >= 800) {\r\n        //     this.node.destroy();\r\n        // }\r\n    }\r\n}\r\n"]}