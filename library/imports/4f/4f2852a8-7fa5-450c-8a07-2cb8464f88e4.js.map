{"version":3,"sources":["assets\\script\\Ui\\LevelPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIPage from \"./UIPage\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { PanelName, Levelitem, PageName, } from \"../Framework/Constant\";\r\nimport LevelItem from \"./LevelItem\";\r\nimport Msg from \"../Framework/Msg\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class LevelPanel extends UIPage {\r\n    /**返回按钮 */\r\n    private Back: cc.Node = null;\r\n    /**关卡Item的父节点 */\r\n    private content: cc.Node = null;\r\n\r\n    private ScaleNode: cc.Node = null;\r\n    private BtnVideo: cc.Node = null;\r\n    private node: cc.Node = null;\r\n    // private role: cc.Node = null;\r\n    // private bee: cc.Node = null;\r\n    // private bee2: cc.Node = null;\r\n    // private bee3: cc.Node = null;\r\n\r\n    // private dragon: dragonBones.ArmatureDisplay = null;\r\n    private PageView: cc.PageView = null;\r\n\r\n    constructor() {\r\n        super();\r\n        this._init();\r\n    }\r\n    private _init() {\r\n        let Game: cc.Prefab = cocosz.resMgr.getRes(PanelName.LevelPanel, cc.Prefab);\r\n        if (Game) {\r\n            let node: cc.Node = cc.instantiate(Game);\r\n            if (node) {\r\n                this._page = node;   \r\n                 cc.find(\"Canvas/ui\").addChild(node);\r\n                node.active = false;\r\n                node.position = cc.Vec2.ZERO;\r\n                this._onLoad();\r\n            }\r\n        }\r\n    }\r\n    private _onLoad() {\r\n        // this.BtnVideo = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/BtnVideo\");\r\n        this.Back = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/Back\");\r\n        this.content = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/PageView/view/content\");\r\n        this.ScaleNode = cc.find(\"Canvas/ui/LevelPanel/ScaleNode\");\r\n\r\n        // this.role = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/role\");\r\n        // this.bee = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/propHoneybee\");\r\n        // this.bee2 = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/propHoneybee2\");\r\n        // this.bee3 = cc.find(\"Canvas/ui/LevelPanel/ScaleNode/propHoneybee3\");\r\n        // this.dragon = this.role.getComponent(dragonBones.ArmatureDisplay);\r\n        this.PageView = this.ScaleNode.getChildByName(\"PageView\").getComponent(cc.PageView);\r\n        cc.director.getScheduler().enableForTarget(this);\r\n\r\n        this._Start();\r\n    }\r\n    private _Start() {\r\n        // cc.log(this.Back)\r\n        this.Back.on(cc.Node.EventType.TOUCH_END, this.OnBack, this);\r\n        // this.BtnVideo.on(cc.Node.EventType.TOUCH_END, this.onGetCoin, this);\r\n\r\n        this._ClonItem();\r\n    }\r\n    private _UpdateIndicator() {\r\n    }\r\n\r\n    private OnBack() {\r\n        cocosz.audioMgr.playbtnEffect();\r\n        cocosz.unscheduleAllCallbacks();\r\n\r\n        cocosz.sceneMgr.loadScene(\"Home\", () => {\r\n            cocosz.uiMgr.openPage(PageName.UiHome);\r\n        });\r\n\r\n\r\n        // lieyou_SdkManager.showBannerByBottom();\r\n        // this.close();\r\n    }\r\n\r\n    onGetCoin() {\r\n        cocosz.audioMgr.playbtnEffect();\r\n        Msg.Show(\"视频播放失败!\");\r\n        return;\r\n    }\r\n\r\n    protected onOpen() {\r\n        let num = Math.floor(cocosz.dataMgr.MaxUnlockLevelCount / 20) > 6 ? 6 : Math.floor(cocosz.dataMgr.MaxUnlockLevelCount / 20);\r\n        cc.log(cocosz.dataMgr.MaxLevelId, cocosz.dataMgr.MaxUnlockLevelCount, num);\r\n        this.PageView.scrollToPage(num, 1);\r\n        cocosz.unscheduleAllCallbacks();\r\n        // num = Math.ceil(Math.random() + 1)\r\n        // num = 1\r\n        // if (Math.random() > 0.7) {\r\n        num = 2;\r\n        // }\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME) {\r\n            lieyou_SdkManager.hideBanner()\r\n        }\r\n        else if ((cc.sys.platform === cc.sys.VIVO_GAME || cc.sys.platform === cc.sys.OPPO_GAME)) {\r\n            lieyou_SdkManager.hideBanner();\r\n        }\r\n\r\n\r\n        // let a = cc.tween().sequence(\r\n        //     cc.tween().parallel(\r\n        //         cc.tween().call(() => {\r\n        //             this.dragon.playAnimation(\"deng\", num)\r\n        //         }),\r\n        //         cc.tween().by(0.5 * num, { position: cc.v2(0, 50) })\r\n        //     ),\r\n        //     cc.tween().call(() => {\r\n        //         this.dragon.playAnimation(\"idle\", 0)\r\n        //     }),\r\n        //     cc.tween().by(4, { position: cc.v2(400, -50) })\r\n        // )\r\n        // let b = cc.tween().sequence(\r\n        //     cc.tween().parallel(\r\n        //         cc.tween().call(() => {\r\n        //             this.dragon.playAnimation(\"deng\", num)\r\n        //         }),\r\n        //         cc.tween().by(0.5 * num, { position: cc.v2(0, 50) })\r\n        //     ),\r\n        //     cc.tween().call(() => {\r\n        //         this.dragon.playAnimation(\"idle\", 0)\r\n        //     }),\r\n        //     cc.tween().by(4, { position: cc.v2(-400, -50) })\r\n        // )\r\n\r\n        // let c = cc.tween().sequence(\r\n\r\n        //     cc.tween().call(() => {\r\n        //         this.role.scaleX = 1;\r\n        //     }),\r\n        //     cc.tween().repeat(5, a),\r\n        //     cc.tween().call(() => {\r\n        //         this.role.setPosition(cc.v2(911, 150));\r\n        //         this.role.scaleX = -1;\r\n        //     }),\r\n\r\n        //     cc.tween().repeat(5, b)\r\n        // )\r\n\r\n        // cc.tween(this.role)\r\n        //     .repeatForever(c)\r\n        //     .start()\r\n\r\n\r\n\r\n\r\n        // let d = cc.tween().sequence(\r\n\r\n        //     cc.tween().repeat(10, cc.tween().by(2.5, { position: cc.v2(200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 })),\r\n\r\n        //     cc.tween().call(() => {\r\n        //         this.bee.setPosition(cc.v2(1110, 250));\r\n        //         this.bee.scaleX *= -1;\r\n        //     }),\r\n\r\n        //     cc.tween().repeat(10, cc.tween().by(2.7, { position: cc.v2(-200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 })),\r\n        //     cc.tween().call(() => {\r\n        //         this.bee.setPosition(cc.v2(-946, 250));\r\n        //         this.bee.scaleX *= -1;\r\n        //         this.bee.y += Math.random() * 50 - 25;\r\n        //         this.bee.x += Math.random() * 50 - 150;\r\n        //     }),\r\n        // )\r\n\r\n\r\n\r\n        // let e = cc.tween().sequence(\r\n\r\n        //     cc.tween().repeat(10, cc.tween().by(2.5, { position: cc.v2(200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 })),\r\n\r\n        //     cc.tween().call(() => {\r\n        //         this.bee2.setPosition(cc.v2(1110, 250));\r\n        //         this.bee2.scaleX *= -1;\r\n        //     }),\r\n\r\n        //     cc.tween().repeat(10, cc.tween().by(2.7, { position: cc.v2(-200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 })),\r\n        //     cc.tween().call(() => {\r\n        //         this.bee2.setPosition(cc.v2(-946, 250));\r\n        //         this.bee2.scaleX *= -1;\r\n        //         this.bee2.y += Math.random() * 50 - 25;\r\n        //         this.bee2.x += Math.random() * 50 - 150;\r\n        //     }),\r\n        // )\r\n\r\n        // let f = cc.tween().sequence(\r\n\r\n        //     cc.tween().repeat(10, cc.tween().by(2.5, { position: cc.v2(200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 })),\r\n\r\n        //     cc.tween().call(() => {\r\n        //         this.bee3.setPosition(cc.v2(1110, 250));\r\n        //         this.bee3.scaleX *= -1;\r\n        //     }),\r\n\r\n        //     cc.tween().repeat(10, cc.tween().by(2.7, { position: cc.v2(-200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 })),\r\n        //     cc.tween().call(() => {\r\n        //         this.bee3.setPosition(cc.v2(-946, 250));\r\n        //         this.bee3.scaleX *= -1;\r\n        //         this.bee3.y += Math.random() * 50 - 25;\r\n        //         this.bee3.x += Math.random() * 50 - 150;\r\n        //     }),\r\n        // )\r\n        // cc.tween(this.bee)\r\n\r\n\r\n        //     .repeatForever(d)\r\n        //     .start()\r\n\r\n        // // let node = cc.instantiate(this.bee);\r\n        // // this.bee.parent.addChild(node);\r\n        // // node.setPosition(this.bee.getPosition())\r\n        // this.bee2.y += Math.random() * 50 - 25;\r\n        // this.bee2.x += Math.random() * 50 - 150;\r\n\r\n        // cc.tween(this.bee2)\r\n\r\n\r\n        //     .repeatForever(e)\r\n        //     // .by(20, { position: cc.v2(1500, 0) })\r\n\r\n        //     .start()\r\n\r\n\r\n\r\n\r\n        // // let node2 = cc.instantiate(this.bee);\r\n        // // this.bee.parent.addChild(node2);\r\n        // // node2.setPosition(this.bee.getPosition())\r\n        // this.bee3.y += Math.random() * 50 - 25;\r\n        // this.bee3.x += Math.random() * 50 - 150;\r\n\r\n        // cc.tween(this.bee3)\r\n        //     .repeat(10, cc.tween().by(2.7, { position: cc.v2(200, 150 * Math.random() - 75), angle: 100 * Math.random() - 50 }))\r\n\r\n        //     .repeatForever(f)\r\n        //     .start()\r\n    }\r\n\r\n    private _ClonItem() {\r\n        let a: cc.Prefab = cocosz.resMgr.getRes(\"LevelItem\", cc.Prefab);\r\n        let num = 0\r\n        for (let child of this.content.children) {\r\n            for (let j = 0 + 20 * num; j < 20 + 20 * num; j++) {\r\n                let node: cc.Node = cc.instantiate(a);\r\n                node.getComponent(LevelItem).ID = j;\r\n                child.addChild(node);\r\n            }\r\n            num++;\r\n        }\r\n    }\r\n    protected onClose() {\r\n        cc.director.getScheduler().unscheduleAllForTarget(this);\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        cc.director.getScheduler().unscheduleAllForTarget(this);\r\n        cc.game.targetOff(this);\r\n    }\r\n}\r\n"]}