{"version":3,"sources":["assets\\resources\\SDK\\scripts\\HuaweiManager.js"],"names":["HuaweiManager","cc","Class","require","init","obj","_super","loginSuccess","self","hbs","gameLogin","forceLogin","appid","huaWeiId_Sdk","success","res","showFloatingWin","lieyou_showLog","fail","data","code","complete","loadCall","cbShow","bind","cbHide","hideFloatingWin","onShow","onHide","showFloatWindow","hideFloatWindow","getHaveVideo","getSysPlatform_string","getSysPlatform","module","exports"],"mappings":";;;;;;AACA,IAAIA,aAAa,GAACC,EAAE,CAACC,KAAH,CAAS;AACvB,aAAQC,OAAO,CAAC,aAAD,CADQ;AAGnBC,EAAAA,IAAI,EAAE,cAASC,GAAT,EAAa;AACf,SAAKC,MAAL;;AAEC,SAAKC,YAAL,GAAkB,CAAC,CAAnB;AAEA,QAAIC,IAAI,GAAE,IAAV;AAGDC,IAAAA,GAAG,CAACC,SAAJ,CAAc;AACVC,MAAAA,UAAU,EAAE,CADF;AACK;AACfC,MAAAA,KAAK,EAAEC,YAFG;AAGVC,MAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAe;AACpBP,QAAAA,IAAI,CAACD,YAAL,GAAoB,CAApB,CADoB,CACG;;AACvBC,QAAAA,IAAI,CAACQ,eAAL,GAFoB,CAEI;;AAExBC,QAAAA,cAAc,CAAC,mBAAD,CAAd;AACH,OARS;AASVC,MAAAA,IATU,gBASLC,IATK,EASCC,IATD,EASO;AACbZ,QAAAA,IAAI,CAACD,YAAL,GAAoB,CAAC,CAArB;AACAU,QAAAA,cAAc,CAAC,mBAAD,CAAd;AACAA,QAAAA,cAAc,CAAC,wBAAwBE,IAAxB,GAA+B,GAA/B,GAAqCC,IAAtC,CAAd;AACH,OAbS;AAcVC,MAAAA,QAdU,sBAcC;AACPJ,QAAAA,cAAc,CAAC,mBAAD,CAAd;;AAEA,YAAGZ,GAAG,CAACiB,QAAP,EAAgB;AACZjB,UAAAA,GAAG,CAACiB,QAAJ;AACH;AACJ;AApBS,KAAd,EARe,CA+Bf;;AAEA,QAAIC,MAAM,GAAG,YAAY;AACrBN,MAAAA,cAAc,CAAC,0CAAD,EAA4C,KAAKV,YAAjD,CAAd,CADqB,CAEjB;;AACA,UAAI,KAAKA,YAAL,KAAsB,CAA1B,EAA6B;AACzB,aAAKS,eAAL;AACH;AACJ,KANQ,CAMPQ,IANO,CAMF,IANE,CAAb;;AAQA,QAAIC,MAAM,GAAG,YAAY;AACrBR,MAAAA,cAAc,CAAC,0CAAD,EAA4C,KAAKV,YAAjD,CAAd;AACA,WAAKmB,eAAL;AACH,KAHY,CAGXF,IAHW,CAGN,IAHM,CAAb;;AAKAf,IAAAA,GAAG,CAACkB,MAAJ,CAAWJ,MAAX;AACAd,IAAAA,GAAG,CAACmB,MAAJ,CAAWH,MAAX;AACH,GAnDkB;;AAqDvB;;;AAGAT,EAAAA,eAxDuB,6BAwDL;AACdP,IAAAA,GAAG,CAACoB,eAAJ,CAAoB;AAChBjB,MAAAA,KAAK,EAAEC,YADS;AACK;AACrBC,MAAAA,OAAO,EAAE,mBAAY;AACjBG,QAAAA,cAAc,CAAC,uBAAD,CAAd;AACH,OAJe;AAKhBC,MAAAA,IAAI,EAAE,cAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACxBH,QAAAA,cAAc,CAAC,uBAAD,CAAd;AACAA,QAAAA,cAAc,CAAC,4BAA4BE,IAA5B,GAAmC,SAAnC,GAA+CC,IAAhD,CAAd;AACH;AARe,KAApB;AAUH,GAnEsB;;AAqEvB;;;AAGAM,EAAAA,eAxEuB,6BAwEL;AACdjB,IAAAA,GAAG,CAACqB,eAAJ,CAAoB;AAChBlB,MAAAA,KAAK,EAAEC,YADS;AAEhBC,MAAAA,OAAO,EAAE,mBAAY;AACjBG,QAAAA,cAAc,CAAC,uBAAD,CAAd;AACH,OAJe;AAKhBC,MAAAA,IAAI,EAAE,cAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACxBH,QAAAA,cAAc,CAAC,uBAAD,CAAd;AACAA,QAAAA,cAAc,CAAC,4BAA4BE,IAA5B,GAAmC,SAAnC,GAA+CC,IAAhD,CAAd;AACH;AARe,KAApB;AAUH,GAnFsB;AAqFvBW,EAAAA,YAAY,EAAC,wBAAU;AACnB,WAAO,KAAP;AACH,GAvFsB;AAwFvBC,EAAAA,qBAxFuB,mCAwFA;AACzB,WAAO,QAAP;AACG,GA1FsB;AA2FvBC,EAAAA,cA3FuB,4BA2FP;AAClB,WAAO,CAAP;AACA;AA7FyB,CAAT,CAAlB;AAgGAC,MAAM,CAACC,OAAP,GAAiBnC,aAAjB","sourceRoot":"/","sourcesContent":["\r\nlet HuaweiManager=cc.Class({\r\n    extends:require('BaseManager'),\r\n        \r\n        init: function(obj){\r\n            this._super();\r\n\r\n             this.loginSuccess=-1;\r\n\r\n             var self =this;\r\n\r\n             \r\n            hbs.gameLogin({\r\n                forceLogin: 1, //强制登陆，未登陆时会弹出登陆对话框\r\n                appid: huaWeiId_Sdk,\r\n                success: function (res) {\r\n                    self.loginSuccess = 0; //记录登录成功标记\r\n                    self.showFloatingWin(); //显示浮标\r\n\r\n                    lieyou_showLog(\"Huawei>>>>>>>登录成功\");\r\n                },\r\n                fail(data, code) {\r\n                    self.loginSuccess = -1;\r\n                    lieyou_showLog(\"Huawei>>>>>>>登录失败\");\r\n                    lieyou_showLog(\"on gameLogin fail: \" + data + \",\" + code);\r\n                },\r\n                complete() {\r\n                    lieyou_showLog(\"Huawei>>>>>>>登录完成\");\r\n\r\n                    if(obj.loadCall){\r\n                        obj.loadCall();\r\n                    }\r\n                }\r\n            });\r\n\r\n            // 注册onShow/onHide回调，用于隐藏和显示浮标\r\n\r\n            var cbShow = function () {\r\n                lieyou_showLog(\"Huawei>>>>>>>onShow回调>>>>>loginSuccess=:\",this.loginSuccess);\r\n                    // 如果登录成功显示浮标\r\n                    if (this.loginSuccess === 0) {\r\n                        this.showFloatingWin();\r\n                    }\r\n                }.bind(this);\r\n                \r\n            var cbHide = function () {\r\n                lieyou_showLog(\"Huawei>>>>>>>onHide回调>>>>>loginSuccess=:\",this.loginSuccess);\r\n                this.hideFloatingWin();\r\n            }.bind(this);\r\n\r\n            hbs.onShow(cbShow);\r\n            hbs.onHide(cbHide);\r\n        },\r\n\r\n    /**\r\n     * 显示游戏浮标窗口\r\n    */\r\n    showFloatingWin() {\r\n        hbs.showFloatWindow({\r\n            appid: huaWeiId_Sdk, //appid需要与华为开发者联盟后台配置一致\r\n            success: function () {\r\n                lieyou_showLog(\"Huawei>>>>>>>显示浮标窗口成功\");\r\n            },\r\n            fail: function (data, code) {\r\n                lieyou_showLog(\"Huawei>>>>>>>显示浮标窗口失败\");\r\n                lieyou_showLog(\"show float window fail:\" + data + \", code:\" + code);\r\n            }\r\n        });\r\n    },\r\n\r\n    /** \r\n    *  隐藏浮标窗口\r\n    */\r\n    hideFloatingWin() {\r\n        hbs.hideFloatWindow({\r\n            appid: huaWeiId_Sdk,\r\n            success: function () { \r\n                lieyou_showLog(\"Huawei>>>>>>>隐藏浮标窗口成功\");\r\n            },\r\n            fail: function (data, code) { \r\n                lieyou_showLog(\"Huawei>>>>>>>隐藏浮标窗口失败\");\r\n                lieyou_showLog(\"hide float window fail:\" + data + \", code:\" + code);\r\n            }\r\n        });\r\n    },\r\n\r\n    getHaveVideo:function(){\r\n        return false;\r\n    },\r\n    getSysPlatform_string(){\r\n\t\treturn 'huawei';\r\n    },\r\n    getSysPlatform(){\r\n\t\treturn 6;\r\n\t},\r\n});\r\n\r\nmodule.exports = HuaweiManager;\r\n"]}