{"version":3,"sources":["assets\\script\\Ui\\UiLottery.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIPage from \"./UIPage\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { PanelName } from \"../Framework/Constant\";\r\nimport Msg from \"../Framework/Msg\";\r\nimport { timeStamp } from \"console\";\r\nconst { ccclass, property } = cc._decorator;\r\nlet rewardList = [-1, 100, 200, -2, 500, 999];\r\n// let rewardList = [5, 2000, 300, 3, 500, 1000, 2000, 5];\r\n@ccclass\r\nexport default class UiLottery extends UIPage {\r\n\r\n    btnFree: cc.Node = null;\r\n    btnVideo: cc.Node = null;\r\n    lottery: cc.Node = null;\r\n    btnBack: cc.Node = null;\r\n\r\n    scaleNode: cc.Node = null;\r\n    action: any = null;\r\n    isAction: any = null;\r\n\r\n    num: number = -1;\r\n\r\n\r\n    /**\r\n     *  max: 15,\r\n        min: 2,\r\n     */\r\n    maxSpeed: number = 12;\r\n\r\n    /**\r\n     * 减速前旋转时间\r\n     *  max: 5,\r\n        min: 1,\r\n     */\r\n    duration: number = 1.5;\r\n\r\n\r\n    /**\r\n     * 加速度\r\n     *  max: 0.2,\r\n        min: 0.01,\r\n     */\r\n    acc: number = 0.1;\r\n\r\n    /**\r\n     * 指定结束时的齿轮\r\n     *  max: 17,\r\n        min: 0,\r\n     */\r\n    targetID: number = 0;\r\n\r\n    /**\r\n     * 旋转结束是否回弹\r\n     * \r\n     */\r\n    springback: boolean = false;\r\n\r\n\r\n    skinID: number = -1;\r\n    skinID2: number = -1;\r\n\r\n\r\n\r\n\r\n    wheelState = 0;\r\n    curSpeed = 0;\r\n    spinTime = 0;                   //减速前旋转时间\r\n    gearNum = 6;\r\n    defaultAngle = 0;        //修正默认角度\r\n    gearAngle = 360 / this.gearNum;   //每个齿轮的角度\r\n\r\n    finalAngle = 0;                 //最终结果指定的角度\r\n    effectFlag = 0;                 //用于音效播放\r\n    audioID = 0;\r\n    decAngle = 0;\r\n\r\n    constructor() {\r\n        super();\r\n        this._init();\r\n    }\r\n\r\n    private _init() {\r\n        let Game: cc.Prefab = cocosz.resMgr.getRes(PanelName.UiLottery, cc.Prefab);\r\n        if (Game) {\r\n            let node: cc.Node = cc.instantiate(Game);\r\n            if (node) {\r\n                this._page = node;\r\n                cc.find(\"Canvas\").addChild(node);\r\n                node.active = false;\r\n                node.position = cc.Vec2.ZERO;\r\n                this._onLoad();\r\n            }\r\n        }\r\n    }\r\n    private _onLoad() {\r\n        this.scaleNode = cc.find(\"Canvas/UiLottery/ScaleNode\");\r\n        this.btnFree = this.scaleNode.getChildByName(\"BtnFree\");\r\n        this.lottery = this.scaleNode.getChildByName(\"Lottery\");\r\n        this.btnVideo = this.scaleNode.getChildByName(\"BtnVideo\");\r\n        this.btnBack = this.scaleNode.getChildByName(\"BtnBack\");\r\n\r\n        this._Start();\r\n    }\r\n\r\n\r\n    private _Start() {\r\n        this.btnFree.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.onReward();\r\n        });\r\n        this.btnVideo.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.onVideo()\r\n        });\r\n        this.btnBack.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.onBack();\r\n        });\r\n\r\n        cocosz.schedule(() => {\r\n            if (this.wheelState === 0) {\r\n                return;\r\n            }\r\n            // 播放音效有可能卡\r\n            this.effectFlag += this.curSpeed;\r\n            if (this.effectFlag >= this.gearAngle) {\r\n\r\n                cocosz.audioMgr.playLotteryEffect();\r\n                this.effectFlag = 0;\r\n            }\r\n\r\n\r\n            if (this.wheelState == 1) {\r\n                // cc.log('....加速,speed:' + this.curSpeed);\r\n                this.spinTime += 0.005;\r\n                this.lottery.angle = this.lottery.angle + this.curSpeed;\r\n                if (this.curSpeed <= this.maxSpeed) {\r\n                    this.curSpeed += this.acc;\r\n                }\r\n                else {\r\n                    if (this.spinTime < this.duration) {\r\n                        return;\r\n                    }\r\n                    // cc.log('....开始减速');\r\n                    //设置目标角度\r\n                    if (Math.abs(Math.abs(Math.floor(this.lottery.angle) % 360) - Math.abs(Math.floor(360 - this.targetID * this.gearAngle + this.defaultAngle) % 360)) < 5) {\r\n                        this.finalAngle = 360 - this.targetID * this.gearAngle + this.defaultAngle;\r\n                        this.maxSpeed = this.curSpeed;\r\n                        // if (this.springback) {\r\n                        //     this.finalAngle += this.gearAngle;\r\n                        // }\r\n                        this.lottery.angle = this.finalAngle;\r\n                        this.wheelState = 2;\r\n\r\n                    }\r\n                }\r\n            }\r\n            else if (this.wheelState == 2) {\r\n                // cc.log('......减速');\r\n                var curRo = this.lottery.angle; //应该等于finalAngle\r\n                var hadRo = curRo - this.finalAngle;\r\n                this.curSpeed = this.maxSpeed * ((this.decAngle - hadRo) / this.decAngle) + 0.2;\r\n                this.lottery.angle = curRo + this.curSpeed;\r\n\r\n                if ((this.decAngle - hadRo) <= 0) {\r\n                    // cc.log('....停止');\r\n                    this.wheelState = 0;\r\n                    this.lottery.angle = this.finalAngle;\r\n                    // if (this.springback) {\r\n                    //     //倒转一个齿轮\r\n                    //     // var act = new cc.rotateBy(0.6, -this.gearAngle);\r\n                    //     var act = cc.rotateBy(0.6, -this.gearAngle);\r\n                    //     var seq = cc.sequence(cc.delayTime(0.2), act, cc.callFunc(this.showRes, this));\r\n                    //     this.lottery.runAction(seq);\r\n                    // }\r\n                    // else {\r\n                    this.showRes();\r\n                    // }\r\n                }\r\n            }\r\n\r\n        }, 0.005)\r\n    }\r\n\r\n    protected onOpen() {\r\n        this.scaleNode.scale = 0;\r\n        cc.tween(this.scaleNode)\r\n            .to(0.2, { scale: 1 })\r\n            .call(() => {\r\n                // this.action = cc.tween(this.lottery)\r\n                //     .repeatForever(cc.tween().by(45, { angle: 360 }))\r\n                // this.action.start();\r\n            })\r\n            .start();\r\n        cc.log(\"-------cocosz.dataMgr.Lottery-------\", cocosz.dataMgr.Lottery)\r\n        if (cocosz.dataMgr.Lottery <= 0) {\r\n            this.btnFree.active = false;\r\n            this.btnVideo.active = true;\r\n        }\r\n        else {\r\n            this.btnFree.active = true;\r\n            this.btnVideo.active = false;\r\n        }\r\n\r\n        if ((cc.sys.platform === cc.sys.VIVO_GAME)) {\r\n            lieyou_SdkManager.showBannerByBottom();\r\n        }\r\n        else if (cc.sys.platform === cc.sys.OPPO_GAME) {\r\n            this.scaleNode.y = 200;\r\n            let sp = cocosz.resMgr.getRes(\"ss\", cc.SpriteFrame)\r\n            lieyou_SdkManager.showNativeAd_big({\r\n                node: this.scaleNode.getChildByName(\"nativePos\"), \"titleColor\": cc.color(255, 255, 255, 255,),\r\n                \"descColor\": cc.color(255, 255, 255, 255,), bgPath: 'texture/ss', texture: sp, scale: 0.9, insetTop: 10, insetBottom: 10, insetLeft: 10, insetRight: 10\r\n            });\r\n        }\r\n\r\n\r\n        this.skinID2 = cocosz.dataMgr.getRandomLockBalloonSkin();\r\n        this.skinID = cocosz.dataMgr.getRandomLockSkin();\r\n\r\n\r\n        this.lottery.getChildByName(\"Lottery\").children[0].getChildByName(\"gold_1\").getComponent(cc.Sprite).spriteFrame = cocosz.resMgr.getRes(\"role\" + this.skinID, cc.SpriteFrame);\r\n        this.lottery.getChildByName(\"Lottery\").children[3].getChildByName(\"gold_1\").getComponent(cc.Sprite).spriteFrame = cocosz.resMgr.getRes(\"balloon\" + (this.skinID2 + 1), cc.SpriteFrame);\r\n    }\r\n    showRes() {\r\n\r\n        // cocosz.audioMgr.playGetCoin();\r\n\r\n        if (cocosz.dataMgr.Lottery <= 0) {\r\n            this.btnFree.active = false;\r\n            this.btnVideo.active = true;\r\n        }\r\n        if (rewardList[this.targetID] > 0) {\r\n            Msg.Show(`恭喜获得${rewardList[this.targetID]}金币`);\r\n            cocosz.dataMgr.CoinCount += rewardList[this.targetID]\r\n        }\r\n        else if (rewardList[this.targetID] >= -1) {\r\n            let info = cocosz.dataMgr.getSkinInfo(this.skinID);\r\n            if (info.State == 1 || info.State == 2) {\r\n                Msg.Show(`该皮肤已解锁，转化成${info.Price}金币`);\r\n                cocosz.dataMgr.CoinCount += info.Price\r\n                return;\r\n            }\r\n\r\n            Msg.Show(`皮肤解锁成功`);\r\n            cocosz.dataMgr.CurSkinId = this.skinID;\r\n        }\r\n        else if (rewardList[this.targetID] >= -2) {\r\n            let info = cocosz.dataMgr.getBallbonSkinInfo(this.skinID);\r\n            cc.log(info)\r\n            if (info.State == 1 || info.State == 2) {\r\n                Msg.Show(`该皮肤已解锁，转化成${info.Price}金币`);\r\n                cocosz.dataMgr.CoinCount += info.Price\r\n                return;\r\n            }\r\n\r\n            Msg.Show(`皮肤解锁成功`);\r\n            cocosz.dataMgr.CurBallbonSkinId = this.skinID2;\r\n        }\r\n        // cocosz.dataMgr.Lottery--;\r\n    }\r\n\r\n    protected onReward() {\r\n        // if (this.isAction) return;\r\n        // this.isAction = true;\r\n        // let num = this._getRanDom();\r\n        // this.action.stop();\r\n        // cc.tween(this.lottery)\r\n        //     .call(() => {\r\n        //         this.lottery.angle = this.lottery.angle % 360;\r\n        //     })\r\n        //     .to(5, { angle: (360 * 10 + 22.5) }, { easing: \"circIn\" })\r\n        //     .by(num * 45 / 360 + 1, { angle: (num * 45 + 360) }, { easing: \"circOut\" })\r\n        //     .call(() => {\r\n        //         this.isAction = false;\r\n        //         this._page.angle = this._page.angle % 360\r\n\r\n        //         // cocosz.scheduleOnce(() => {\r\n        //         // this.action.start();\r\n        //         // \r\n        //         // }, 1)\r\n        //     })\r\n        //     .start()\r\n        cocosz.audioMgr.playbtnEffect();\r\n        if (this.wheelState !== 0) {\r\n            Msg.Show(\"正在抽奖中\")\r\n            return;\r\n        }\r\n        // if (cocosz.dataMgr.Lottery <= 0) {\r\n        // utils.adManager.ShowVideo((ret, msg) => {\r\n        //     if (ret) {\r\n        //         this.turntableCount = 1;\r\n        //         this.startTurnTable();\r\n        //     } else {\r\n        //         utils.showMsg(\"观看完整视频可以获取一次抽奖机会！\");\r\n        //         this.onClose();\r\n        //     }\r\n        // })\r\n\r\n        //     return;\r\n        // }\r\n        cocosz.dataMgr.Lottery--;\r\n        this.targetID = this._getRanDom();\r\n        this.decAngle = 2 * 360;  // 减速旋转两圈\r\n        this.wheelState = 1;\r\n        this.curSpeed = 0;\r\n        this.spinTime = 0;\r\n    }\r\n\r\n    onTips(tips) {\r\n        Msg.Show(tips);\r\n    }\r\n\r\n    protected onBack() {\r\n        cc.log(\"-----sceneName--\", cocosz.sceneMgr.sceneName)\r\n\r\n        cocosz.audioMgr.playbtnEffect();\r\n\r\n\r\n        cocosz.unscheduleAllCallbacks();\r\n        cc.tween(this.scaleNode)\r\n            .to(0.2, { scale: 0 })\r\n            .call(() => {\r\n\r\n\r\n                if (this.wheelState == 1 || this.wheelState == 2) {\r\n                    cocosz.dataMgr.Lottery++;\r\n                }\r\n\r\n                if (cocosz.sceneMgr.sceneName == \"Game\") {\r\n                    cocosz.uiMgr.openPanel(PanelName.UiBeforeSucceed);\r\n\r\n                    this._page.destroy();\r\n                }\r\n                else {\r\n                    lieyou_SdkManager.showMoreGameByBanner();\r\n                    this._page.destroy();\r\n                }\r\n\r\n\r\n\r\n            })\r\n            .start();\r\n\r\n    }\r\n    protected onVideo() {\r\n\r\n        cocosz.audioMgr.playbtnEffect();\r\n        // Msg.Show(\"视频播放失败!\");\r\n\r\n        if (cc.sys.platform === cc.sys.WECHAT_GAME || !cc.sys.isMobile) {\r\n\r\n            cocosz.dataMgr.Lottery++;\r\n\r\n            this.onTips(\"抽奖次数+1\");\r\n\r\n            if (cocosz.dataMgr.Lottery <= 0) {\r\n                this.btnFree.active = false;\r\n                this.btnVideo.active = true;\r\n            }\r\n            else {\r\n                this.btnFree.active = true;\r\n                this.btnVideo.active = false;\r\n            }\r\n\r\n            this.onReward()\r\n            return;\r\n        }\r\n\r\n        if (cocosz.gameMgr.isDelay) { return };\r\n        cocosz.gameMgr.isDelay = true;\r\n        cocosz.audioMgr.stopAll();\r\n        cocosz.scheduleOnce(() => {\r\n            cocosz.gameMgr.isDelay = false;\r\n        }, 1.5)\r\n\r\n\r\n        lieyou_SdkManager.showRewardedVideoAd((res) => {\r\n            cocosz.audioMgr.resumAllMusic();\r\n            if (res) {\r\n                cocosz.dataMgr.Lottery++;\r\n\r\n                this.onTips(\"抽奖次数+1\");\r\n\r\n                if (cocosz.dataMgr.Lottery <= 0) {\r\n                    this.btnFree.active = false;\r\n                    this.btnVideo.active = true;\r\n                }\r\n                else {\r\n                    this.btnFree.active = true;\r\n                    this.btnVideo.active = false;\r\n                }\r\n                this.onReward()\r\n            } else {\r\n                this.onTips(\"视频播放完成才能获取奖励\");\r\n            }\r\n        });\r\n    }\r\n    protected onClose() {\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        cocosz.unscheduleAllCallbacks();\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n\r\n    private _getRanDom() {\r\n        let num = Math.random();\r\n\r\n        // return 3\r\n        if (num > 0.7) {\r\n            return 1;\r\n        }\r\n        else if (num > 0.5) {\r\n            return 2;\r\n        }\r\n        else if (num > 0.3) {\r\n            return 4;\r\n        }\r\n        else if (num > 0.1) {\r\n            return 5;\r\n        }\r\n        else if (num > 0.05) {\r\n            return 3;\r\n        }\r\n        else if (num > 0) {\r\n            return 0;\r\n        }\r\n\r\n    }\r\n}\r\n"]}