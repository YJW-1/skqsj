{"version":3,"sources":["assets\\script\\Game\\balloon.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { tag } from \"../Framework/Constant\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class balloon extends cc.Component {\r\n\r\n    isDef = false;\r\n\r\n    private _rigidBody: cc.RigidBody = null;\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if (other.tag == tag.thorn || other.tag == tag.stone || other.tag == tag.stone3 || other.tag == tag.honeybee ||\r\n            other.tag == tag.floorThorn || other.tag == tag.rain || other.tag == tag.bat) {\r\n            cocosz.gameMgr.onBalloonDes(this.node.parent.name);\r\n            cocosz.audioMgr.playMetalStoneEffect2();\r\n            cc.game.targetOff(this);\r\n            cc.game.emit(Constant.E_PROP_BALLOONDES);\r\n            this.node.parent.destroy();\r\n        }\r\n        else if (other.tag == tag.succeedPoint || other.tag == tag.faidPoint) {\r\n            contact.disabled = true;\r\n        }\r\n        else if (other.tag == tag.carton) {\r\n            if (this.isDef) return;\r\n            this.isDef = true\r\n            this._rigidBody.gravityScale -= 1;\r\n        }\r\n        else if (other.tag == 777) {\r\n            cc.log(\"--------------99\")\r\n            if (this._rigidBody.gravityScale > -8) {\r\n                this._rigidBody.gravityScale = -8;\r\n            }\r\n        }\r\n        else if (other.tag == 1234) {\r\n            cc.log(\"----------------------1234\")\r\n            this._rigidBody.linearVelocity = cc.v2(0, 0);\r\n            // this.node.getComponent(cc.PhysicsCircleCollider).enabled = false\r\n            // this.node.getComponent(cc.RigidBody).type = cc.RigidBodyType.Animated;\r\n            // this.node.getComponent(cc.PhysicsCircleCollider).enabled = true\r\n        }\r\n        else if (cocosz.dataMgr.CurLevelId == 113 && (other.tag == 36 || other.tag == 0)) {\r\n            cc.log(\"--------------99\")\r\n            if (this._rigidBody.gravityScale > -4) {\r\n                this._rigidBody.gravityScale = -4;\r\n            }\r\n        }\r\n    }\r\n\r\n    onDesByLaser() {\r\n        cocosz.gameMgr.onBalloonDes(this.node.parent.name);\r\n        cocosz.audioMgr.playMetalStoneEffect2();\r\n        cc.game.targetOff(this);\r\n        cc.game.emit(Constant.E_PROP_BALLOONDES);\r\n        this.node.parent.destroy();\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onDestroy() {\r\n        // if (cc.sys.platform === cc.sys.WECHAT_GAME && cocosz.dataMgr.ShockOn) {\r\n        //     window[\"wx\"].vibrateShort();\r\n        // }\r\n\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    onLoad() {\r\n        this._rigidBody = this.node.getComponent(cc.RigidBody);\r\n    }\r\n\r\n    start() {\r\n        cc.game.on(Constant.E_PROP_BALLOONDES, () => {\r\n            this._rigidBody.gravityScale -= 1.9;\r\n            if (cocosz.dataMgr.CurLevelId == 38) {\r\n                this._rigidBody.gravityScale -= 0.5;\r\n            }\r\n            cc.game.targetOff(this);\r\n        }, this)\r\n\r\n\r\n        if (cocosz.dataMgr.CurLevelId == 85) {\r\n            this._rigidBody.gravityScale = -2.3;\r\n        }\r\n\r\n        // cc.game.on(Constant.E_PROP_BALLOONDESBYLASER, () => {\r\n        //     this.onDesByLaser();\r\n        // }, this)\r\n        // cc.game.on(Constant.E_ROLE_MOVE, () => {\r\n        //     this.isDef = true;\r\n        //     this._rigidBody.gravityScale *= 2;\r\n        //     cc.game.targetOff(this);\r\n        // })\r\n        let sp = this.node.getChildByName(\"sp\").getComponent(cc.Sprite);\r\n        cc.log(\"balloon\" + (cocosz.dataMgr.CurBallbonSkinId + 1));\r\n        cc.log(cocosz.resMgr.getRes(\"balloon\" + (cocosz.dataMgr.CurBallbonSkinId + 1), cc.SpriteFrame))\r\n        sp.spriteFrame = cocosz.resMgr.getRes(\"balloon\" + (cocosz.dataMgr.CurBallbonSkinId + 1), cc.SpriteFrame);\r\n        // this.scheduleOnce(()=>{\r\n\r\n        //     if (cocosz.sceneMgr.sceneName == \"Game2\") {\r\n        //         let v = this._rigidBody.linearVelocity;\r\n        //         v.y = 1000;\r\n        //         this._rigidBody.linearVelocity =cc.v2(0,10000);\r\n        //     }\r\n        // },0.2)\r\n        if (cocosz.sceneMgr.sceneName == \"Game2\") {\r\n            this.schedule(() => {\r\n                if (Math.random() > 0.5) {\r\n                    this._rigidBody.linearVelocity = cc.v2(0, -300)\r\n                }\r\n            }, 5)\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (cocosz.sceneMgr.sceneName != \"Game2\") return\r\n        let v = this._rigidBody.linearVelocity;\r\n        if (v.x != 0) {\r\n            this._rigidBody.linearVelocity = cc.v2(0, v.y);\r\n        }\r\n    }\r\n}\r\n"]}