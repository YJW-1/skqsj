{"version":3,"sources":["assets\\script\\ysqszc\\theBall.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { tag } from \"../Framework/Constant\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class theBall extends cc.Component {\r\n\r\n\r\n    @property(cc.Node)\r\n    ball: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    camera: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    listen: cc.Node = null;\r\n\r\n    @property(cc.RigidBody)\r\n    rb: cc.RigidBody = null\r\n\r\n    @property(cc.ParticleSystem)\r\n    particle: cc.ParticleSystem = null\r\n\r\n\r\n    pos: any = null;\r\n\r\n    isMove: boolean = false;\r\n\r\n    moveNum: number = 0;\r\n\r\n    onBeginContact(contact, self, other) {\r\n        cc.log(other.tag, other.node.name, other.node.parent.name,)\r\n        if (other.tag == tag.balloon || other.tag == tag.player || other.tag == tag.rope) {\r\n            // contact.disabled = true;\r\n\r\n            let v = this.rb.linearVelocity;\r\n            v.x = 0;\r\n            v.y = 0;\r\n            this.rb.linearVelocity = v;\r\n        }\r\n        else if (other.tag == tag.stone || other.tag == tag.thorn || other.tag == tag.bat || other.node.name == \"wooldenBox3\") {\r\n            // cc.log(other.node.getComponent(cc.RigidBody).gravityScale, \"---------other.gravityScale\")\r\n\r\n            if (other.node.getComponent(cc.RigidBody).gravityScale == 0) {\r\n                other.node.getComponent(cc.RigidBody).gravityScale = 1;\r\n            }\r\n            if (other.node.getComponent(cc.RigidBody).type == cc.RigidBodyType.Kinematic) {\r\n                // cc.log(other.node);\r\n                // if(other.tag==\"\")\r\n                // return\r\n                cocosz.scheduleOnce(() => {\r\n                    // cc.log(other.node);\r\n                    if (!other.node) return\r\n                    other.node.getComponent(cc.RigidBody).type = cc.RigidBodyType.Dynamic;\r\n                    if (other.node.name == \"sBoard\") {\r\n                        other.node.getComponent(cc.PhysicsBoxCollider).apply()\r\n                    }\r\n                }, 0.1)\r\n            }\r\n        }\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        // this.listen.zIndex += 9999;\r\n        this.listen.on(cc.Node.EventType.TOUCH_START, (event: cc.Touch) => {\r\n            if (+cocosz.dataMgr.isNovice == 0) return;\r\n            // cc.game.emit(Constant.E_GAME_START);\r\n        }, this)\r\n\r\n        this.listen.on(cc.Node.EventType.TOUCH_MOVE, (event: cc.Touch) => {\r\n            let pos = event.getDelta();\r\n            // this.ball.x += pos.x;\r\n            // this.ball.y += pos.y\r\n            if (((this.ball.x < -cc.winSize.width / 2 + 50) && pos.x < 0) || ((this.ball.x > cc.winSize.width / 2 - 50) && pos.x > 0)) return\r\n            if (((this.ball.y < -cc.winSize.height / 2 + 50) && pos.y < 0) || ((this.ball.y > cc.winSize.height / 2 - 50) && pos.y > 0)) return\r\n            let v = this.rb.linearVelocity;\r\n            // cc.log(v.x, v.y)\r\n            v.x = pos.x * 130;\r\n            v.y = pos.y * 130;\r\n            // cc.log(v.x, v.y)\r\n            this.rb.linearVelocity = v\r\n            // if (this.isMove) return;\r\n\r\n            this.isMove = true\r\n            this.moveNum++;\r\n\r\n\r\n\r\n            // if (this.moveNum > 3) {\r\n            //     this.moveNum = 0;\r\n            //     this.particle.resetSystem();\r\n            // }\r\n            // this.schedule(() => {\r\n            //     this.particle.resetSystem();\r\n            // }, 1)\r\n\r\n        }, this)\r\n\r\n        this.listen.on(cc.Node.EventType.TOUCH_END, (event: cc.Touch) => {\r\n\r\n            this.isMove = false\r\n            this.rb.linearVelocity = cc.v2(0, 0)\r\n        }, this)\r\n\r\n        this.listen.on(cc.Node.EventType.TOUCH_CANCEL, (event: cc.Touch) => {\r\n\r\n            this.isMove = false\r\n            this.rb.linearVelocity = cc.v2(0, 0)\r\n        }, this)\r\n\r\n        this.pos = this.camera.getPosition();\r\n\r\n\r\n    }\r\n\r\n    lateUpdate(dt) {\r\n        // if (!this.isMove) {\r\n        let v = this.rb.linearVelocity;\r\n\r\n        if (v.x != 0 || v.y != 0) {\r\n\r\n            let prefab = cocosz.resMgr.getRes(\"ballParticle\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            // node.x -= 10;\r\n            // node.y += 10\r\n            this.node.addChild(node);\r\n            node.zIndex -= 100;\r\n        }\r\n\r\n        this.rb.linearVelocity = cc.v2(0, 0)\r\n        // }\r\n        // let x = this.camera.x - this.pos.x;\r\n        // let y = this.camera.y - this.pos.y;\r\n        // this.ball.x += x; this.ball.y += y;\r\n        // this.pos = this.camera.getPosition();\r\n\r\n        // this.ball.y += 0.000000001;\r\n        // if (cocosz.sceneMgr.sceneName == \"Game2\") {\r\n        //     if (this.node.y <= -3000 || Math.abs(this.node.x) > 500) {\r\n        //         this.node.destroy()\r\n        //         return\r\n        //     };\r\n        // }\r\n    }\r\n}\r\n"]}