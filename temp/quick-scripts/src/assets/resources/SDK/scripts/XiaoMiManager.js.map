{"version":3,"sources":["assets\\resources\\SDK\\scripts\\XiaoMiManager.js"],"names":["XiaoMiManager","cc","Class","require","properties","bannerAd","getHaveVideo","xiaomi_VideoId","getSysPlatform_string","getSysPlatform","init","obj","_super","_canShowSpotAd","showRewardedVideoAd","id","closeCallBack","vaCallBack","videoAd","show","self","qg","createRewardedVideoAd","adUnitId","onError","err","lieyou_showLog","JSON","stringify","onClose","res","isEnded","hideBanner","destroy","showBanner","xiaomi_BannerId","showBannerByBottom","showSpot","xiaomi_Spot","setTimeout","interstitialAd","createInterstitialAd","onLoad","data","showSpotByPause","isHaveNative","top","showSpotByBegin","showSpotByFinish","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["//1051\r\nlet XiaoMiManager = cc.Class({\r\n\textends: require('BaseManager'),\r\n\tproperties:{\r\n        bannerAd: null,\r\n    },\r\n    getHaveVideo(){\r\n        if(xiaomi_VideoId == ''){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    getSysPlatform_string(){\r\n\t\treturn 'xiaomi';\r\n    },\r\n    getSysPlatform(){\r\n        return 9;\r\n    },\r\n    \r\n    \r\n    init: function(obj){\r\n        this._super();\r\n        this._canShowSpotAd = true;\r\n    },\r\n    \r\n    showRewardedVideoAd(id,closeCallBack){\r\n        if(xiaomi_VideoId == '') {\r\n            closeCallBack(false);\r\n            return;\r\n        }\r\n        this.vaCallBack = closeCallBack;\r\n        if(this.videoAd){\r\n            this.videoAd.show();\r\n            return;\r\n        }\r\n        var self = this;\r\n        this.videoAd = qg.createRewardedVideoAd({// \r\n            adUnitId: xiaomi_VideoId\r\n        });\r\n        this.videoAd.show();\r\n        this.videoAd.onError(function (err) {\r\n            // self.videoAd.load();\r\n            self.vaCallBack(false);\r\n            lieyou_showLog(\"xiaomi------play vd errr-----  \" + JSON.stringify(err));\r\n        });\r\n        this.videoAd.onClose(function (res) {\r\n            lieyou_showLog(\"xiaomi------play vd over-----  \" + JSON.stringify(res));\r\n            if (res && res.isEnded) {\r\n                self.vaCallBack(true);\r\n            } else {\r\n                self.vaCallBack(false);\r\n            }\r\n        });\r\n    },\r\n    \r\n\r\n    hideBanner(){\r\n        if(this.bannerAd)\t{\r\n               this.bannerAd.destroy();\r\n               this.bannerAd = null;\r\n\t\t}\r\n    },\r\n    \r\n    showBanner(obj = {}){\r\n        if(xiaomi_BannerId == '') {\r\n            return;\r\n        };\r\n    },\r\n    showBannerByBottom(id){\r\n        this.showBanner({});\r\n    },\r\n\r\n    showSpot(){\r\n        var self = this;\r\n        if(xiaomi_Spot == ''|| !this._canShowSpotAd) {\r\n            return;\r\n        };\r\n        setTimeout(() => {\r\n            self._canShowSpotAd = true;\r\n        }, 1000*30);\r\n        self._canShowSpotAd = false;\r\n\r\n        var interstitialAd = qg.createInterstitialAd({\r\n            adUnitId: xiaomi_Spot\r\n        });\r\n        interstitialAd.show();\r\n        interstitialAd.onLoad(() => {\r\n            lieyou_showLog(\"xiaomi------show spot load-----  \");\r\n        })\r\n        interstitialAd.onError( data => {\r\n            lieyou_showLog(\"xiaomi------show spot fail-----  \" + JSON.stringify(data));\r\n        })\r\n    },\r\n    showSpotByPause(isHaveNative,top){\r\n        this.showSpot(true);\r\n    },\r\n    showSpotByBegin(isHaveNative,top){\r\n        this.showSpot();\r\n    },\r\n    showSpotByFinish(isHaveNative,top){\r\n        this.showSpot();\r\n    },\r\n    \r\n})\r\nmodule.exports = XiaoMiManager;\r\n\r\n\r\n\r\n\r\n"]}