{"version":3,"sources":["assets\\script\\Game\\propRocket.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { tag } from \"../Framework/Constant\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class propRocket extends cc.Component {\r\n\r\n    isDis: boolean = false;\r\n\r\n\r\n    onBeginContact(contact, self, other) {\r\n        if (this.isDis) return\r\n        if (this.isDis) return\r\n        cc.log(other.tag)\r\n        if (other.tag == tag.stone || other.tag == tag.stone3 || other.tag == tag.rocket) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.1)\r\n            other.node.destroy();\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            other.node.parent.addChild(node);\r\n            node.setPosition(other.node.getPosition());\r\n        }\r\n        else if (other.tag == tag.bat || other.tag == 81) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.1)\r\n            other.node.destroy();\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            other.node.parent.addChild(node);\r\n            node.setPosition(other.node.getPosition());\r\n        }\r\n\r\n\r\n        else if (other.tag == tag.player) {\r\n            let node = other.node;\r\n            let parent = node.parent;\r\n            contact.disabled = true;\r\n            if (parent.name != \"role\") {\r\n                parent = parent.parent;\r\n            }\r\n            for (let child of node.parent.children) {\r\n                if (child.name == \"right_balloon\" || child.name == \"left_balloon\") continue;\r\n                child.color = cc.color(0, 0, 0, 255);\r\n                for (let child2 of child.children) {\r\n                    child2.color = cc.color(0, 0, 0, 255);\r\n                    if (child.children.length > 0) {\r\n                        for (let child3 of child2.children) {\r\n                            child3.color = cc.color(0, 0, 0, 255);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node2 = cc.instantiate(prefab);\r\n            this.node.parent.addChild(node2);\r\n            node.setPosition(this.node.getPosition());\r\n            this.node.destroy();\r\n            cc.game.emit(Constant.E_GAME_FAID)\r\n        }\r\n        // else if (other.tag == tag.thorn) {\r\n        //     this.isDis = true;\r\n        //     cocosz.audioMgr.playRocketEffect2();\r\n        //     this.scheduleOnce(() => {\r\n        //         this.node.destroy();\r\n        //     }, 0.1)\r\n        //     other.node.destroy();\r\n        //     let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n        //     let node = cc.instantiate(prefab);\r\n        //     this.node.parent.addChild(node);\r\n        //     node.setPosition(this.node.getPosition());\r\n        // }\r\n        else if (other.tag == 0 || other.tag == 7) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.1)\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            this.node.parent.addChild(node);\r\n            node.setPosition(this.node.getPosition());\r\n        }\r\n        else if (other.tag == tag.bigFan) {\r\n            this.isDis = true;\r\n            cocosz.audioMgr.playRocketEffect2();\r\n            this.scheduleOnce(() => {\r\n                this.node.destroy();\r\n            }, 0.01)\r\n            let script = other.node.getComponent(\"propBigFan\");\r\n            script.onDamaged();\r\n\r\n            let prefab = cocosz.resMgr.getRes(\"rocketEffect\", cc.Prefab);\r\n            let node = cc.instantiate(prefab);\r\n            other.node.parent.addChild(node);\r\n            node.setPosition(other.node.getPosition());\r\n        }\r\n        else if (other.tag == tag.rocketFloor) {\r\n            cc.log(\"--------------------10\")\r\n            contact.disabled = true;\r\n        }\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n            cocosz.audioMgr.playRocketEffect1();\r\n            let rb = this.node.getComponent(cc.RigidBody);\r\n            let v = rb.linearVelocity;\r\n            if (this.node.parent.angle == 0 || this.node.parent.angle == 180) {\r\n                let direction = this.node.parent.angle == 0 ? 1 : -1\r\n                v.x = 1000 * direction;\r\n                rb.linearVelocity = v;\r\n\r\n            }\r\n            else if (this.node.parent.angle == 90 || this.node.parent.angle == 270) {\r\n                let direction = this.node.parent.angle == 90 ? 1 : -1\r\n                v.y = 500 * direction;\r\n                if (cocosz.dataMgr.CurLevelId == 93) {\r\n                    v.y += 500 * direction;\r\n                }\r\n                if (cocosz.dataMgr.CurLevelId == 54||cocosz.dataMgr.CurLevelId == 133) {\r\n                    v.y -= 400 * direction;\r\n                }\r\n                rb.linearVelocity = v;\r\n            }\r\n            this.node.off(cc.Node.EventType.TOUCH_START);\r\n        })\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}