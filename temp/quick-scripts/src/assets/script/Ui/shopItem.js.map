{"version":3,"sources":["assets\\script\\Ui\\shopItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant from \"../Framework/Constant\";\r\nimport Msg from \"../Framework/Msg\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    buy: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    change: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    alreadyWear: cc.Node = null;\r\n\r\n\r\n    @property(cc.Label)\r\n    coin: cc.Label = null;\r\n\r\n\r\n    id: number = 1;\r\n\r\n\r\n    sp: cc.Sprite = null;\r\n\r\n    init(id) {\r\n        this.id = id;\r\n        let info = cocosz.dataMgr.getBallbonSkinInfo(this.id);\r\n        if (this.node.name == \"ballbonItem\") {\r\n            this.sp = this.node.getChildByName(\"sp\").getComponent(cc.Sprite);\r\n            let sp = cocosz.resMgr.getRes(\"balloon\" + (this.id + 1), cc.SpriteFrame);\r\n            this.sp.spriteFrame = sp;\r\n            this.coin.string = info.Price;\r\n        }\r\n        else if (this.node.name == \"roleItem\") {\r\n            info = cocosz.dataMgr.getSkinInfo(this.id)\r\n            this.sp = this.node.getChildByName(\"sp\").getComponent(cc.Sprite);\r\n            let sp = cocosz.resMgr.getRes(\"role\" + (this.id), cc.SpriteFrame);\r\n            this.sp.spriteFrame = sp;\r\n            this.coin.string = info.Price;\r\n        }\r\n\r\n\r\n        cc.log(info, this.node.x);\r\n\r\n\r\n        switch (info.State) {\r\n            case 0: {\r\n                this.buy.active = true;\r\n                this.change.active = false;\r\n                this.alreadyWear.active = false;\r\n                break;\r\n            }\r\n            case 1: {\r\n                this.buy.active = false;\r\n                this.change.active = true;\r\n                this.alreadyWear.active = false;\r\n                this.coin.node.parent.active = false;\r\n                break;\r\n            }\r\n            case 2: {\r\n                this.buy.active = false;\r\n                this.change.active = false;\r\n                this.alreadyWear.active = true;\r\n                this.coin.node.parent.active = false;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onDestroy() {\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    // onDisable() {\r\n    //     cc.game.targetOff(this);\r\n    // }\r\n    // onDisable() {\r\n    //     cc.game.targetOff(this);\r\n    // }\r\n\r\n    onLoad() {\r\n    }\r\n\r\n    start() {\r\n        if (this.node.name == \"ballbonItem\") {\r\n\r\n            this.buy.on(cc.Node.EventType.TOUCH_END, (() => {\r\n                let info = cocosz.dataMgr.getBallbonSkinInfo(this.id)\r\n                let price = info.Price;\r\n                cc.log(info);\r\n                if (info.State == 1 || info.State == 2) {\r\n                    Msg.Show(\"该皮肤已拥有\")\r\n                    return;\r\n                }\r\n                if (cocosz.dataMgr.CoinCount >= price) {\r\n                    cocosz.dataMgr.CurBallbonSkinId = this.id;\r\n                    cocosz.dataMgr.CoinCount -= price;\r\n                    cc.game.emit(Constant.E_MAP_FINISH);\r\n\r\n                    cc.game.emit(Constant.E_UPDATE_COIN)\r\n                    Msg.Show(\"购买皮肤成功\");\r\n                }\r\n                else {\r\n                    Msg.Show(\"金币不足,先去冒险获得金币吧\");\r\n                }\r\n            }))\r\n\r\n\r\n            this.change.on(cc.Node.EventType.TOUCH_END, (() => {\r\n                cocosz.dataMgr.CurBallbonSkinId = this.id;\r\n                cc.game.emit(Constant.E_MAP_FINISH);\r\n                Msg.Show(\"更换皮肤成功\")\r\n\r\n            }))\r\n        }\r\n        else if (this.node.name == \"roleItem\") {\r\n\r\n            this.buy.on(cc.Node.EventType.TOUCH_END, (() => {\r\n                let price = cocosz.dataMgr.getSkinInfo(this.id).Price;\r\n                cc.log(price);\r\n\r\n                if (cocosz.dataMgr.CoinCount >= price) {\r\n                    cocosz.dataMgr.CurSkinId = this.id;\r\n                    cocosz.dataMgr.CoinCount -= price;\r\n                    cc.game.emit(Constant.E_MAP_FINISH);\r\n\r\n                    cc.game.emit(Constant.E_UPDATE_COIN)\r\n\r\n                    Msg.Show(\"购买皮肤成功\");\r\n                }\r\n                else {\r\n                    Msg.Show(\"金币不足,先去冒险获得金币吧\");\r\n                }\r\n            }))\r\n            this.change.on(cc.Node.EventType.TOUCH_END, (() => {\r\n                cocosz.dataMgr.CurSkinId = this.id;\r\n                cc.game.emit(Constant.E_MAP_FINISH);\r\n                Msg.Show(\"更换皮肤成功\")\r\n            }))\r\n\r\n        }\r\n\r\n\r\n\r\n        cc.game.on(Constant.E_MAP_FINISH, () => {\r\n            this.init(this.id);\r\n        }, this)\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}