{"version":3,"sources":["assets\\script\\Ui\\UiSet.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIPage from \"./UIPage\";\r\nimport { cocosz } from \"../Framework/CocosZ\";\r\nimport Constant, { PanelName } from \"../Framework/Constant\";\r\nimport Msg from \"../Framework/Msg\";\r\nimport { hideBanner } from \"../../resources/SDK/scripts/SdkManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class UiSet extends UIPage {\r\n\r\n    scaleNode: cc.Node = null;\r\n\r\n    btnMusic: cc.Node = null;\r\n    btnEffect: cc.Node = null;\r\n    btnShork: cc.Node = null;\r\n    btnBack: cc.Node = null;\r\n\r\n    num: number = null;\r\n\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this._init();\r\n    }\r\n\r\n    private _init() {\r\n        let Game: cc.Prefab = cocosz.resMgr.getRes(PanelName.UiSet, cc.Prefab);\r\n        if (Game) {\r\n            let node: cc.Node = cc.instantiate(Game);\r\n            if (node) {\r\n                this._page = node;\r\n                cc.find(\"Canvas/ui\").addChild(node);\r\n                node.active = true;\r\n                node.position = cc.Vec2.ZERO;\r\n                this._onLoad();\r\n            }\r\n        }\r\n    }\r\n    private _onLoad() {\r\n        this.scaleNode = this._page.getChildByName(\"scaleNode\");\r\n        this.btnMusic = this.scaleNode.getChildByName(\"btn_music\");\r\n        this.btnEffect = this.scaleNode.getChildByName(\"btn_effect\");\r\n        this.btnShork = this.scaleNode.getChildByName(\"btn_shock\");\r\n        this.btnBack = this.scaleNode.getChildByName(\"btn_back\");\r\n\r\n        this._Start();\r\n    }\r\n\r\n\r\n    private _Start() {\r\n        this.btnMusic.getChildByName(\"btnBg\").on(cc.Node.EventType.TOUCH_END, () => {\r\n            cocosz.dataMgr.AudioOn = !cocosz.dataMgr.AudioOn;\r\n            if (cocosz.dataMgr.AudioOn) {\r\n                cocosz.audioMgr.playGameMusic();\r\n            }\r\n            else {\r\n                cocosz.audioMgr.stopAll();\r\n            }\r\n            this.initBtnState();\r\n        });\r\n        this.btnEffect.getChildByName(\"btnBg\").on(cc.Node.EventType.TOUCH_END, () => {\r\n            cocosz.dataMgr.AudioEffectOn = !cocosz.dataMgr.AudioEffectOn\r\n            this.initBtnState();\r\n        });\r\n        this.btnShork.getChildByName(\"btnBg\").on(cc.Node.EventType.TOUCH_END, () => {\r\n            cocosz.dataMgr.ShockOn = !cocosz.dataMgr.ShockOn\r\n            this.initBtnState();\r\n        });\r\n        this.btnBack.on(cc.Node.EventType.TOUCH_END, () => {\r\n            this.onBack();\r\n        });\r\n        this.scaleNode.getChildByName(\"box_bg\").on(cc.Node.EventType.TOUCH_END, () => {\r\n            this.num++;\r\n            if (this.num > 10) {\r\n\r\n                cocosz.dataMgr.LastBonusTime = \"0\";\r\n                // cocosz.dataMgr.CoinCount += 99999;\r\n                cc.game.emit(Constant.E_UPDATE_COIN);\r\n                cocosz.gameMgr.isLevelOpen = true;\r\n            }\r\n        });\r\n    }\r\n\r\n    protected onOpen() {\r\n        this.initBtnState();\r\n        this.scaleNode.scale = 0;\r\n        cc.tween(this.scaleNode)\r\n            .to(0.2, { scale: 1.4 })\r\n            .to(0.1, { scale: 1.2 })\r\n            .call(() => {\r\n            })\r\n            .start();\r\n\r\n        if ((cc.sys.platform === cc.sys.VIVO_GAME)) {\r\n            lieyou_SdkManager.showSpotByPause();\r\n        }\r\n        else if (cc.sys.platform === cc.sys.OPPO_GAME) {\r\n            lieyou_SdkManager.hideBanner();\r\n            this.scaleNode.x = -355;\r\n            let sp = cocosz.resMgr.getRes(\"ss\", cc.SpriteFrame)\r\n            lieyou_SdkManager.showNativeAd_big({\r\n                node: this.scaleNode.getChildByName(\"nativePos\"), \"titleColor\": cc.color(255, 255, 255, 255,),\r\n                \"descColor\": cc.color(255, 255, 255, 255,), bgPath: 'texture/ss', texture: sp, scale: 0.85, insetTop: 10, insetBottom: 10, insetLeft: 10, insetRight: 10\r\n            });\r\n        }\r\n\r\n\r\n\r\n        // lieyou_SdkManager.showBannerByBottom();\r\n\r\n        // if (cc.sys.platform === cc.sys.VIVO_GAME) {\r\n        //     lieyou_SdkManager.showSpotByFinish();\r\n        // }\r\n\r\n    }\r\n\r\n\r\n    protected initBtnState() {\r\n        // if (cocosz.dataMgr.AudioOn) {\r\n        let x = cocosz.dataMgr.AudioOn == true ? 204 : 100;\r\n        let pos = cc.v2(x, 0)\r\n        let node = this.btnMusic.getChildByName(\"set_btn\");\r\n        if (node.x != x) {\r\n            cc.tween(node)\r\n                .to(0.2, { position: pos })\r\n                .start()\r\n        }\r\n\r\n\r\n        let x2 = cocosz.dataMgr.AudioEffectOn == true ? 204 : 100;\r\n        let pos2 = cc.v2(x2, 0)\r\n        let node2 = this.btnEffect.getChildByName(\"set_btn\");\r\n        if (node2.x != x2) {\r\n            cc.tween(node2)\r\n                .to(0.2, { position: pos2 })\r\n                .start()\r\n        }\r\n\r\n\r\n\r\n        let x3 = cocosz.dataMgr.ShockOn == true ? 204 : 100;\r\n        let pos3 = cc.v2(x3, 0)\r\n        let node3 = this.btnShork.getChildByName(\"set_btn\");\r\n        if (node3.x != x3) {\r\n            cc.tween(node3)\r\n                .to(0.2, { position: pos3 })\r\n                .start()\r\n        }\r\n        // }\r\n        // this.btnMusic.getChildByName(\"btn_on\").active = cocosz.dataMgr.AudioOn;\r\n        // this.btnMusic.getChildByName(\"btn_off\").active = !cocosz.dataMgr.AudioOn;\r\n\r\n        // this.btnEffect.getChildByName(\"btn_on\").active = cocosz.dataMgr.AudioEffectOn;\r\n        // this.btnEffect.getChildByName(\"btn_off\").active = !cocosz.dataMgr.AudioEffectOn;\r\n\r\n        // this.btnShork.getChildByName(\"btn_on\").active = cocosz.dataMgr.ShockOn;\r\n        // this.btnShork.getChildByName(\"btn_off\").active = !cocosz.dataMgr.ShockOn;\r\n    }\r\n\r\n    protected onBack() {\r\n\r\n        cc.tween(this.scaleNode)\r\n            .to(0.2, { scale: 0 })\r\n            .call(() => {\r\n                lieyou_SdkManager.showMoreGameByBanner();\r\n                this._page.destroy();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    protected onClose() {\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n    protected onDestroy() {\r\n        cc.game.targetOff(this);\r\n    }\r\n\r\n\r\n    private _getRanDom() {\r\n        let num = Math.random();\r\n        if (num > 0.8) {\r\n            return 0;\r\n        }\r\n        else if (num > 0.65) {\r\n            return 1;\r\n        }\r\n        else if (num > 0.5) {\r\n            return 2;\r\n        }\r\n        else if (num > 0.3) {\r\n            return 3;\r\n        }\r\n        else if (num > 0.2) {\r\n            return 4;\r\n        }\r\n        else if (num > 0.1) {\r\n            return 5;\r\n        }\r\n        else if (num > 0.02) {\r\n            return 6;\r\n        }\r\n        else if (num > 0) {\r\n            return 7;\r\n        }\r\n\r\n    }\r\n}\r\n"]}