
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/resources/SDK/module/lieyou_InstallShortcutPrefab.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'f06909tK6NBW6rFFP1HCnIF', 'lieyou_InstallShortcutPrefab');
// resources/SDK/module/lieyou_InstallShortcutPrefab.js

"use strict";

window.lieyou_getInstallShortcutPrefab = function () {
  var node = new cc.Node();
  node.on(cc.Node.EventType.TOUCH_END, function (event) {
    node.callFun();
  });
  node.addComponent(cc.Sprite);
  lieyou_load('installShortcut/bg', function (err, texture) {
    node.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  var heartBg = new cc.Node();
  var heart = new cc.Node();
  var figer = new cc.Node();
  node.addChild(heartBg);
  node.addChild(heart);
  node.addChild(figer);
  heartBg.addComponent(cc.Sprite);
  lieyou_load('installShortcut/heartBg', function (err, texture) {
    heartBg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  heart.addComponent(cc.Sprite);
  lieyou_load('installShortcut/heart', function (err, texture) {
    heart.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  figer.addComponent(cc.Sprite);
  lieyou_load('installShortcut/figer', function (err, texture) {
    figer.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  heartBg.y = 12;
  heart.y = 12;
  figer.y = -110;
  heartBg.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function () {
    heartBg.opacity = 255;
    heartBg.scale = 1;
  }), cc.spawn(cc.scaleTo(0.8, 3), cc.fadeOut(0.8)))));
  figer.runAction(cc.repeatForever(cc.sequence(cc.moveBy(0.5, 0, -40), cc.moveBy(0.5, 0, 40))));
  return node;
};

window.lieyou_getInstallShortcutDialogPrefab = function () {
  var node = new cc.Node();
  var pingbi = new cc.Node();
  node.addChild(pingbi);
  pingbi.addComponent(cc.BlockInputEvents);
  pingbi.addComponent(cc.Sprite);
  pingbi.opacity = 50;
  lieyou_load('q_ad/oppo_native_insters_layerBg.png', function (err, texture) {
    pingbi.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
    pingbi.getComponent(cc.Sprite).sizeMode = cc.Sprite.SizeMode.CUSTOM;
    pingbi.width = lieyou_SdkManager.sdkWinSize.width;
    pingbi.height = lieyou_SdkManager.sdkWinSize.height;
  });
  var bg = new cc.Node();
  node.scale = lieyou_SdkManager._SceneScale;
  pingbi.scale = 1 / lieyou_SdkManager._SceneScale;
  node.addChild(bg);
  bg.addComponent(cc.Sprite);
  lieyou_load('q_ad/bg.png', function (err, texture) {
    bg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
    bg.getComponent(cc.Sprite).spriteFrame.insetTop = 100;
    bg.getComponent(cc.Sprite).spriteFrame.insetBottom = 20;
    bg.getComponent(cc.Sprite).spriteFrame.insetLeft = 50;
    bg.getComponent(cc.Sprite).spriteFrame.insetRight = 50;
    bg.getComponent(cc.Sprite).sizeMode = cc.Sprite.SizeMode.CUSTOM;
    bg.getComponent(cc.Sprite).type = cc.Sprite.Type.SLICED;
    bg.width = 650;
    bg.height = 400;
  });
  var touchButton = new cc.Node();
  bg.addChild(touchButton);
  touchButton.y = -80;
  touchButton.addComponent(cc.Sprite);
  lieyou_load('q_ad/touch.png', function (err, texture) {
    // touchButton.active = false;
    touchButton.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
    touchButton.getComponent(cc.Sprite).sizeMode = cc.Sprite.SizeMode.CUSTOM;
    touchButton.width = 354 * 0.7;
    touchButton.height = 117 * 0.7;
  });
  var closeButton = new cc.Node();
  bg.addChild(closeButton);
  closeButton.x = 0;
  closeButton.y = -160;
  closeButton.addComponent(cc.Sprite);
  lieyou_load('installShortcut/close.png', function (err, texture) {
    closeButton.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
    closeButton.getComponent(cc.Sprite).sizeMode = cc.Sprite.SizeMode.CUSTOM;
  });
  var touchName = new cc.Node();
  touchButton.addChild(touchName);
  touchName.addComponent(cc.Sprite);
  lieyou_load('installShortcut/add.png', function (err, texture) {
    touchName.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  var title = new cc.Node();
  bg.addChild(title);
  title.y = 160;
  title.addComponent(cc.Sprite);
  lieyou_load('installShortcut/title.png', function (err, texture) {
    title.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  var world = new cc.Node();
  bg.addChild(world);
  world.y = 70;
  world.addComponent(cc.Sprite);
  lieyou_load('installShortcut/world.png', function (err, texture) {
    world.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  var day = new cc.Node();
  bg.addChild(day);
  day.y = 0;
  day.x = -25;
  day.addComponent(cc.Sprite);
  lieyou_load('installShortcut/day.png', function (err, texture) {
    day.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  var okBg = new cc.Node();
  var ok = new cc.Node();
  ok.active = false;
  okBg.addChild(ok);
  day.addChild(okBg);
  okBg.x = 100;
  okBg.addComponent(cc.Sprite);
  okBg.on(cc.Node.EventType.TOUCH_START, function (event) {
    ok.active = !ok.active;
  });
  lieyou_load('installShortcut/okBg.png', function (err, texture) {
    okBg.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  ok.addComponent(cc.Sprite);
  lieyou_load('installShortcut/ok.png', function (err, texture) {
    ok.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
  });
  console.log("------------E_ADClOSE111111111111111111-----");
  closeButton.on(cc.Node.EventType.TOUCH_START, function (event) {
    if (ok.active) {
      var dayTime = lieyou_getTimeDay();
      Userdefault.setDataForKey('lieyou_notShowInstallShortcut', dayTime);
    }

    console.log("------------E_ADClOSE22222222-----");
    cc.game.emit("E_ADClOSE");
    node.destroy();
  });
  touchButton.on(cc.Node.EventType.TOUCH_START, function (event) {
    if (ok.active) {
      var dayTime = lieyou_getTimeDay();
      Userdefault.setDataForKey('lieyou_notShowInstallShortcut', dayTime);
    }

    lieyou_SdkManager.instance.installShortcut({
      canShow: true,
      success: function success() {
        var addGold = parseInt(Math.random() * 10) + 10;
        var gold = Userdefault.getIntForKey(lieyou.Key_Gold, 0);
        Userdefault.setDataForKey(lieyou.Key_Gold, gold + addGold);
      }
    });
    node.destroy();
  });
  closeButton.scale = 0;
  closeButton.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {
    closeButton.scale = 1;
  })));
  var nativeNode = new cc.Node();
  nativeNode.y = -270;
  nativeNode.addComponent(cc.Sprite);
  lieyou_load('installShortcut/whiteBg.png', function (err, texture) {
    nativeNode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);
    nativeNode.getComponent(cc.Sprite).sizeMode = cc.Sprite.SizeMode.CUSTOM;
    nativeNode.width = 600;
    nativeNode.height = 400;
  });
  node.addChild(nativeNode); // nativeNode.scale = 1/lieyou_SdkManager._SceneScale;

  if (false && cc.winSize.height > cc.winSize.width && lieyou_SdkManager.showNativeAd_big({
    node: nativeNode,
    bgPath: "null",
    scale: 1
  })) {
    bg.y = 200;
  } else {
    nativeNode.active = false;
  }

  return node;
};

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xccmVzb3VyY2VzXFxTREtcXG1vZHVsZVxcbGlleW91X0luc3RhbGxTaG9ydGN1dFByZWZhYi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJsaWV5b3VfZ2V0SW5zdGFsbFNob3J0Y3V0UHJlZmFiIiwibm9kZSIsImNjIiwiTm9kZSIsIm9uIiwiRXZlbnRUeXBlIiwiVE9VQ0hfRU5EIiwiZXZlbnQiLCJjYWxsRnVuIiwiYWRkQ29tcG9uZW50IiwiU3ByaXRlIiwibGlleW91X2xvYWQiLCJlcnIiLCJ0ZXh0dXJlIiwiZ2V0Q29tcG9uZW50Iiwic3ByaXRlRnJhbWUiLCJTcHJpdGVGcmFtZSIsImhlYXJ0QmciLCJoZWFydCIsImZpZ2VyIiwiYWRkQ2hpbGQiLCJ5IiwicnVuQWN0aW9uIiwicmVwZWF0Rm9yZXZlciIsInNlcXVlbmNlIiwiY2FsbEZ1bmMiLCJvcGFjaXR5Iiwic2NhbGUiLCJzcGF3biIsInNjYWxlVG8iLCJmYWRlT3V0IiwibW92ZUJ5IiwibGlleW91X2dldEluc3RhbGxTaG9ydGN1dERpYWxvZ1ByZWZhYiIsInBpbmdiaSIsIkJsb2NrSW5wdXRFdmVudHMiLCJzaXplTW9kZSIsIlNpemVNb2RlIiwiQ1VTVE9NIiwid2lkdGgiLCJsaWV5b3VfU2RrTWFuYWdlciIsInNka1dpblNpemUiLCJoZWlnaHQiLCJiZyIsIl9TY2VuZVNjYWxlIiwiaW5zZXRUb3AiLCJpbnNldEJvdHRvbSIsImluc2V0TGVmdCIsImluc2V0UmlnaHQiLCJ0eXBlIiwiVHlwZSIsIlNMSUNFRCIsInRvdWNoQnV0dG9uIiwiY2xvc2VCdXR0b24iLCJ4IiwidG91Y2hOYW1lIiwidGl0bGUiLCJ3b3JsZCIsImRheSIsIm9rQmciLCJvayIsImFjdGl2ZSIsIlRPVUNIX1NUQVJUIiwiY29uc29sZSIsImxvZyIsImRheVRpbWUiLCJsaWV5b3VfZ2V0VGltZURheSIsIlVzZXJkZWZhdWx0Iiwic2V0RGF0YUZvcktleSIsImdhbWUiLCJlbWl0IiwiZGVzdHJveSIsImluc3RhbmNlIiwiaW5zdGFsbFNob3J0Y3V0IiwiY2FuU2hvdyIsInN1Y2Nlc3MiLCJhZGRHb2xkIiwicGFyc2VJbnQiLCJNYXRoIiwicmFuZG9tIiwiZ29sZCIsImdldEludEZvcktleSIsImxpZXlvdSIsIktleV9Hb2xkIiwiZGVsYXlUaW1lIiwibmF0aXZlTm9kZSIsIndpblNpemUiLCJzaG93TmF0aXZlQWRfYmlnIiwiYmdQYXRoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLCtCQUFQLEdBQXlDLFlBQVk7QUFDakQsTUFBSUMsSUFBSSxHQUFHLElBQUlDLEVBQUUsQ0FBQ0MsSUFBUCxFQUFYO0FBQ0FGLEVBQUFBLElBQUksQ0FBQ0csRUFBTCxDQUFRRixFQUFFLENBQUNDLElBQUgsQ0FBUUUsU0FBUixDQUFrQkMsU0FBMUIsRUFBcUMsVUFBVUMsS0FBVixFQUFpQjtBQUNsRE4sSUFBQUEsSUFBSSxDQUFDTyxPQUFMO0FBQ0gsR0FGRDtBQUdBUCxFQUFBQSxJQUFJLENBQUNRLFlBQUwsQ0FBa0JQLEVBQUUsQ0FBQ1EsTUFBckI7QUFDQUMsRUFBQUEsV0FBVyxDQUFDLG9CQUFELEVBQXVCLFVBQUNDLEdBQUQsRUFBTUMsT0FBTixFQUFrQjtBQUNoRFosSUFBQUEsSUFBSSxDQUFDYSxZQUFMLENBQWtCWixFQUFFLENBQUNRLE1BQXJCLEVBQTZCSyxXQUE3QixHQUEyQyxJQUFJYixFQUFFLENBQUNjLFdBQVAsQ0FBbUJILE9BQW5CLENBQTNDO0FBQ0gsR0FGVSxDQUFYO0FBSUEsTUFBSUksT0FBTyxHQUFHLElBQUlmLEVBQUUsQ0FBQ0MsSUFBUCxFQUFkO0FBQ0EsTUFBSWUsS0FBSyxHQUFHLElBQUloQixFQUFFLENBQUNDLElBQVAsRUFBWjtBQUNBLE1BQUlnQixLQUFLLEdBQUcsSUFBSWpCLEVBQUUsQ0FBQ0MsSUFBUCxFQUFaO0FBRUFGLEVBQUFBLElBQUksQ0FBQ21CLFFBQUwsQ0FBY0gsT0FBZDtBQUNBaEIsRUFBQUEsSUFBSSxDQUFDbUIsUUFBTCxDQUFjRixL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QUFBLEtBQUssRUFBRTtBQUEzQyxHQUFuQyxDQUFyRCxFQUF5STtBQUNySWUsSUFBQUEsRUFBRSxDQUFDckIsQ0FBSCxHQUFPLEdBQVA7QUFDSCxHQUZELE1BRU87QUFDSCtELElBQUFBLFVBQVUsQ0FBQ3hCLE1BQVgsR0FBb0IsS0FBcEI7QUFDSDs7QUFFRCxTQUFPM0QsSUFBUDtBQUNILENBaktEIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cubGlleW91X2dldEluc3RhbGxTaG9ydGN1dFByZWZhYiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBub2RlID0gbmV3IGNjLk5vZGUoKTtcclxuICAgIG5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBub2RlLmNhbGxGdW4oKTtcclxuICAgIH0pO1xyXG4gICAgbm9kZS5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgIGxpZXlvdV9sb2FkKCdpbnN0YWxsU2hvcnRjdXQvYmcnLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBoZWFydEJnID0gbmV3IGNjLk5vZGUoKTtcclxuICAgIHZhciBoZWFydCA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICB2YXIgZmlnZXIgPSBuZXcgY2MuTm9kZSgpO1xyXG5cclxuICAgIG5vZGUuYWRkQ2hpbGQoaGVhcnRCZyk7XHJcbiAgICBub2RlLmFkZENoaWxkKGhlYXJ0KTtcclxuICAgIG5vZGUuYWRkQ2hpbGQoZmlnZXIpO1xyXG5cclxuICAgIGhlYXJ0QmcuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICBsaWV5b3VfbG9hZCgnaW5zdGFsbFNob3J0Y3V0L2hlYXJ0QmcnLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgaGVhcnRCZy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgIH0pO1xyXG4gICAgaGVhcnQuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICBsaWV5b3VfbG9hZCgnaW5zdGFsbFNob3J0Y3V0L2hlYXJ0JywgKGVyciwgdGV4dHVyZSkgPT4ge1xyXG4gICAgICAgIGhlYXJ0LmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgfSk7XHJcbiAgICBmaWdlci5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgIGxpZXlvdV9sb2FkKCdpbnN0YWxsU2hvcnRjdXQvZmlnZXInLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgZmlnZXIuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBoZWFydEJnLnkgPSAxMjtcclxuICAgIGhlYXJ0LnkgPSAxMjtcclxuICAgIGZpZ2VyLnkgPSAtMTEwO1xyXG4gICAgaGVhcnRCZy5ydW5BY3Rpb24oY2MucmVwZWF0Rm9yZXZlcihjYy5zZXF1ZW5jZShjYy5jYWxsRnVuYygoKSA9PiB7XHJcbiAgICAgICAgaGVhcnRCZy5vcGFjaXR5ID0gMjU1O1xyXG4gICAgICAgIGhlYXJ0Qmcuc2NhbGUgPSAxO1xyXG4gICAgfSksIGNjLnNwYXduKGNjLnNjYWxlVG8oMC44LCAzKSwgY2MuZmFkZU91dCgwLjgpKSkpKTtcclxuICAgIGZpZ2VyLnJ1bkFjdGlvbihjYy5yZXBlYXRGb3JldmVyKGNjLnNlcXVlbmNlKGNjLm1vdmVCeSgwLjUsIDAsIC00MCksIGNjLm1vdmVCeSgwLjUsIDAsIDQwKSkpKTtcclxuXHJcbiAgICByZXR1cm4gbm9kZTtcclxufVxyXG5cclxud2luZG93LmxpZXlvdV9nZXRJbnN0YWxsU2hvcnRjdXREaWFsb2dQcmVmYWIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbm9kZSA9IG5ldyBjYy5Ob2RlKCk7XHJcblxyXG4gICAgdmFyIHBpbmdiaSA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICBub2RlLmFkZENoaWxkKHBpbmdiaSk7XHJcbiAgICBwaW5nYmkuYWRkQ29tcG9uZW50KGNjLkJsb2NrSW5wdXRFdmVudHMpO1xyXG4gICAgcGluZ2JpLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgcGluZ2JpLm9wYWNpdHkgPSA1MDtcclxuICAgIGxpZXlvdV9sb2FkKCdxX2FkL29wcG9fbmF0aXZlX2luc3RlcnNfbGF5ZXJCZy5wbmcnLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgcGluZ2JpLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgIHBpbmdiaS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zaXplTW9kZSA9IGNjLlNwcml0ZS5TaXplTW9kZS5DVVNUT007XHJcbiAgICAgICAgcGluZ2JpLndpZHRoID0gbGlleW91X1Nka01hbmFnZXIuc2RrV2luU2l6ZS53aWR0aDtcclxuICAgICAgICBwaW5nYmkuaGVpZ2h0ID0gbGlleW91X1Nka01hbmFnZXIuc2RrV2luU2l6ZS5oZWlnaHQ7XHJcbiAgICB9KTtcclxuICAgIHZhciBiZyA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICBub2RlLnNjYWxlID0gbGlleW91X1Nka01hbmFnZXIuX1NjZW5lU2NhbGU7XHJcbiAgICBwaW5nYmkuc2NhbGUgPSAxIC8gbGlleW91X1Nka01hbmFnZXIuX1NjZW5lU2NhbGU7XHJcbiAgICBub2RlLmFkZENoaWxkKGJnKTtcclxuICAgIGJnLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgbGlleW91X2xvYWQoJ3FfYWQvYmcucG5nJywgKGVyciwgdGV4dHVyZSkgPT4ge1xyXG4gICAgICAgIGJnLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgIGJnLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lLmluc2V0VG9wID0gMTAwO1xyXG4gICAgICAgIGJnLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lLmluc2V0Qm90dG9tID0gMjA7XHJcbiAgICAgICAgYmcuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUuaW5zZXRMZWZ0ID0gNTA7XHJcbiAgICAgICAgYmcuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUuaW5zZXRSaWdodCA9IDUwO1xyXG4gICAgICAgIGJnLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNpemVNb2RlID0gY2MuU3ByaXRlLlNpemVNb2RlLkNVU1RPTTtcclxuICAgICAgICBiZy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS50eXBlID0gY2MuU3ByaXRlLlR5cGUuU0xJQ0VEO1xyXG4gICAgICAgIGJnLndpZHRoID0gNjUwO1xyXG4gICAgICAgIGJnLmhlaWdodCA9IDQwMDtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciB0b3VjaEJ1dHRvbiA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICBiZy5hZGRDaGlsZCh0b3VjaEJ1dHRvbik7XHJcbiAgICB0b3VjaEJ1dHRvbi55ID0gLTgwO1xyXG5cclxuICAgIHRvdWNoQnV0dG9uLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgbGlleW91X2xvYWQoJ3FfYWQvdG91Y2gucG5nJywgKGVyciwgdGV4dHVyZSkgPT4ge1xyXG4gICAgICAgIC8vIHRvdWNoQnV0dG9uLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRvdWNoQnV0dG9uLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgIHRvdWNoQnV0dG9uLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNpemVNb2RlID0gY2MuU3ByaXRlLlNpemVNb2RlLkNVU1RPTTtcclxuICAgICAgICB0b3VjaEJ1dHRvbi53aWR0aCA9IDM1NCAqIDAuNztcclxuICAgICAgICB0b3VjaEJ1dHRvbi5oZWlnaHQgPSAxMTcgKiAwLjc7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY2xvc2VCdXR0b24gPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgYmcuYWRkQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG4gICAgY2xvc2VCdXR0b24ueCA9IDA7XHJcbiAgICBjbG9zZUJ1dHRvbi55ID0gLTE2MDtcclxuXHJcbiAgICBjbG9zZUJ1dHRvbi5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgIGxpZXlvdV9sb2FkKCdpbnN0YWxsU2hvcnRjdXQvY2xvc2UucG5nJywgKGVyciwgdGV4dHVyZSkgPT4ge1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLmdldENvbXBvbmVudChjYy5TcHJpdGUpLnNpemVNb2RlID0gY2MuU3ByaXRlLlNpemVNb2RlLkNVU1RPTTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciB0b3VjaE5hbWUgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgdG91Y2hCdXR0b24uYWRkQ2hpbGQodG91Y2hOYW1lKTtcclxuICAgIHRvdWNoTmFtZS5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgIGxpZXlvdV9sb2FkKCdpbnN0YWxsU2hvcnRjdXQvYWRkLnBuZycsIChlcnIsIHRleHR1cmUpID0+IHtcclxuICAgICAgICB0b3VjaE5hbWUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgdGl0bGUgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgYmcuYWRkQ2hpbGQodGl0bGUpO1xyXG4gICAgdGl0bGUueSA9IDE2MDtcclxuICAgIHRpdGxlLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgbGlleW91X2xvYWQoJ2luc3RhbGxTaG9ydGN1dC90aXRsZS5wbmcnLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgdGl0bGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgd29ybGQgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgYmcuYWRkQ2hpbGQod29ybGQpO1xyXG4gICAgd29ybGQueSA9IDcwO1xyXG4gICAgd29ybGQuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICBsaWV5b3VfbG9hZCgnaW5zdGFsbFNob3J0Y3V0L3dvcmxkLnBuZycsIChlcnIsIHRleHR1cmUpID0+IHtcclxuICAgICAgICB3b3JsZC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBkYXkgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgYmcuYWRkQ2hpbGQoZGF5KTtcclxuICAgIGRheS55ID0gMDtcclxuICAgIGRheS54ID0gLTI1O1xyXG4gICAgZGF5LmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgbGlleW91X2xvYWQoJ2luc3RhbGxTaG9ydGN1dC9kYXkucG5nJywgKGVyciwgdGV4dHVyZSkgPT4ge1xyXG4gICAgICAgIGRheS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBva0JnID0gbmV3IGNjLk5vZGUoKTtcclxuICAgIHZhciBvayA9IG5ldyBjYy5Ob2RlKCk7XHJcbiAgICBvay5hY3RpdmUgPSBmYWxzZTtcclxuICAgIG9rQmcuYWRkQ2hpbGQob2spO1xyXG4gICAgZGF5LmFkZENoaWxkKG9rQmcpO1xyXG4gICAgb2tCZy54ID0gMTAwO1xyXG4gICAgb2tCZy5hZGRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgIG9rQmcub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIG9rLmFjdGl2ZSA9ICFvay5hY3RpdmU7XHJcbiAgICB9KTtcclxuICAgIGxpZXlvdV9sb2FkKCdpbnN0YWxsU2hvcnRjdXQvb2tCZy5wbmcnLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgb2tCZy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIG9rLmFkZENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgbGlleW91X2xvYWQoJ2luc3RhbGxTaG9ydGN1dC9vay5wbmcnLCAoZXJyLCB0ZXh0dXJlKSA9PiB7XHJcbiAgICAgICAgb2suZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tRV9BRENsT1NFMTExMTExMTExMTExMTExMTExLS0tLS1cIilcclxuICAgIGNsb3NlQnV0dG9uLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAob2suYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXlUaW1lID0gbGlleW91X2dldFRpbWVEYXkoKTtcclxuICAgICAgICAgICAgVXNlcmRlZmF1bHQuc2V0RGF0YUZvcktleSgnbGlleW91X25vdFNob3dJbnN0YWxsU2hvcnRjdXQnLCBkYXlUaW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tRV9BRENsT1NFMjIyMjIyMjItLS0tLVwiKVxyXG4gICAgICAgIGNjLmdhbWUuZW1pdChcIkVfQURDbE9TRVwiKVxyXG4gICAgICAgIG5vZGUuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdG91Y2hCdXR0b24ub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGlmIChvay5hY3RpdmUpIHtcclxuICAgICAgICAgICAgdmFyIGRheVRpbWUgPSBsaWV5b3VfZ2V0VGltZURheSgpO1xyXG4gICAgICAgICAgICBVc2VyZGVmYXVsdC5zZXREYXRhRm9yS2V5KCdsaWV5b3Vfbm90U2hvd0luc3RhbGxTaG9ydGN1dCcsIGRheVRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaWV5b3VfU2RrTWFuYWdlci5pbnN0YW5jZS5pbnN0YWxsU2hvcnRjdXQoe1xyXG4gICAgICAgICAgICBjYW5TaG93OiB0cnVlLCBzdWNjZXNzOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkR29sZCA9IHBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxMDtcclxuICAgICAgICAgICAgICAgIHZhciBnb2xkID0gVXNlcmRlZmF1bHQuZ2V0SW50Rm9yS2V5KGxpZXlvdS5LZXlfR29sZCwgMCk7XHJcbiAgICAgICAgICAgICAgICBVc2VyZGVmYXVsdC5zZXREYXRhRm9yS2V5KGxpZXlvdS5LZXlfR29sZCwgZ29sZCArIGFkZEdvbGQpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vZGUuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VCdXR0b24uc2NhbGUgPSAwO1xyXG4gICAgY2xvc2VCdXR0b24ucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGNjLmRlbGF5VGltZSgyKSwgY2MuY2FsbEZ1bmMoKCkgPT4ge1xyXG4gICAgICAgIGNsb3NlQnV0dG9uLnNjYWxlID0gMTtcclxuICAgIH0pKSk7XHJcblxyXG4gICAgdmFyIG5hdGl2ZU5vZGUgPSBuZXcgY2MuTm9kZSgpO1xyXG4gICAgbmF0aXZlTm9kZS55ID0gLTI3MDtcclxuICAgIG5hdGl2ZU5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICBsaWV5b3VfbG9hZCgnaW5zdGFsbFNob3J0Y3V0L3doaXRlQmcucG5nJywgKGVyciwgdGV4dHVyZSkgPT4ge1xyXG4gICAgICAgIG5hdGl2ZU5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcbiAgICAgICAgbmF0aXZlTm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKS5zaXplTW9kZSA9IGNjLlNwcml0ZS5TaXplTW9kZS5DVVNUT007XHJcbiAgICAgICAgbmF0aXZlTm9kZS53aWR0aCA9IDYwMDtcclxuICAgICAgICBuYXRpdmVOb2RlLmhlaWdodCA9IDQwMDtcclxuICAgIH0pO1xyXG4gICAgbm9kZS5hZGRDaGlsZChuYXRpdmVOb2RlKTtcclxuICAgIC8vIG5hdGl2ZU5vZGUuc2NhbGUgPSAxL2xpZXlvdV9TZGtNYW5hZ2VyLl9TY2VuZVNjYWxlO1xyXG5cclxuXHJcbiAgICBpZiAoZmFsc2UgJiYgY2Mud2luU2l6ZS5oZWlnaHQgPiBjYy53aW5TaXplLndpZHRoICYmIGxpZXlvdV9TZGtNYW5hZ2VyLnNob3dOYXRpdmVBZF9iaWcoeyBub2RlOiBuYXRpdmVOb2RlLCBiZ1BhdGg6IFwibnVsbFwiLCBzY2FsZTogMSB9KSkge1xyXG4gICAgICAgIGJnLnkgPSAyMDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG5hdGl2ZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5vZGU7XHJcbn0iXX0=