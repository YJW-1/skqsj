
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/resources/SDK/module/qgameMoreGame/lieyou_qGamemoreGame_mid.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5596e9kL4FM/5uh1Cd+o+kj', 'lieyou_qGamemoreGame_mid');
// resources/SDK/module/qgameMoreGame/lieyou_qGamemoreGame_mid.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    fNode: cc.Node,
    type: 2
  },
  onLoad: function onLoad() {},
  onDisable: function onDisable() {
    lieyou_SdkManager.showMoreGameIcon();
  },
  start: function start() {
    lieyou_SdkManager.hideMoreGameIcon();
    var winSize = cc.winSize;
    var winsizeWidth = winSize.height > winSize.width ? winSize.width : winSize.height; // this.node.scale = winsizeWidth/720 * 1.1;
  },
  setData: function setData(obj, isRun, refreshTime) {
    var _this = this;

    var runType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
    //runType 1:page 2:move 3:change 4:pageOne
    var objLength = obj.length;
    var maxL = lieyou_showMoreGameNum;

    if (this.type == 3) {
      maxL = 9;
      runType = 2; //333   
    } else if (this.type == 2) {
      maxL = 8;
    }

    if (this.type == 3 || this.type == 2) {
      if (runType == 1 || runType == 4) {
        maxL = maxL * 2;
      } else if (runType == 2 && this.type == 2) {
        maxL = maxL + 4;
      } else if (runType == 2 && this.type == 3) {
        maxL = maxL + 3;
      }
    }

    for (var i = obj.length; i < maxL; i++) {
      obj.push(obj[i % objLength]);
    }

    this.touchType = 3 + this.type;

    if (this.type == 3) {
      this.touchType = 7;
    }

    this._obj = obj;
    this._childNode = [];
    this._childNodeTag = [];
    this._showData = [];
    this._moreGameNode = [];

    for (var _i = 0; _i < obj.length && _i < maxL; _i++) {
      var node = this.iconPrefab();
      this._childNode[_i] = node;
      this._childNodeTag[_i] = _i;
      this._showData[_i] = true;
      this.fNode.addChild(node);
      node.getComponent('lieyou_qGamemoreGame_icon').setData(obj[_i], this.touchType);
      var hangNum = 4;
      var hangNum2 = 4;

      if (this.type == 3) {
        hangNum = 3;
        hangNum2 = 3;
      }

      if (runType == 1 || runType == 4) {
        hangNum = hangNum * 2;
      }

      if (this.type == 3) {
        node.x = -140 + _i % hangNum * 140 + 10 * parseInt(_i % hangNum / hangNum2) * (runType == 1 ? 1 : 0);
        node.y = 280 - parseInt(_i / hangNum) * 140; //333
      } else if (this.type == 2) {
        node.x = -210 + _i % hangNum * 140 + 10 * parseInt(_i % hangNum / hangNum2) * (runType == 1 ? 1 : 0);
        node.y = 70 - parseInt(_i / hangNum) * 140;
      } else {
        node.x = -210 + _i * 140;

        if (obj.length >= 5 && isRun) {
          this.myMove(node, cc.v2(-210 + (obj.length - 1) * 140, 0), cc.v2(-350, 0));
        }
      }

      if (this.type == 2 || this.type == 3) {
        var posy = 280;

        if (this.type == 2) {
          posy = 210;
        }

        if (runType == 2) {
          this.myMove(node, cc.v2(node.x, posy), cc.v2(node.x, -posy));
        }
      }
    }

    if (this._moreGameNode.length > 0) {
      this.schedule(this.refreshMoreGameNodePos, 1 / 60);
    }

    if (this.type == 2 || this.type == 3) {
      if (runType == 1) {
        this.fNode.runAction(cc.repeatForever(cc.sequence(cc.delayTime(3), cc.moveTo(0.2, -570, 0), cc.delayTime(3), cc.callFunc(function () {
          _this.fNode.x = 0;
        }))));
      } else if (runType == 4) {
        this.fNode.runAction(cc.repeatForever(cc.sequence(cc.delayTime(3), cc.moveBy(0.2, -140, 0), cc.callFunc(function () {
          var fPosX = _this.fNode.x;

          for (var i = 0; i < _this._childNode.length; i++) {
            if (_this._childNode[i].x + fPosX <= -250) {
              _this._childNode[i].x = 770 - fPosX;
            }
          }
        }))));
      }
    }

    for (var _i2 = 8; _i2 < obj.length; _i2++) {
      this._showData[_i2] = false;
    }

    if (this.type == 2 || this.type == 3) {
      if (runType == 3) {
        this.schedule(this.refreshData, refreshTime); //refreshTime
      }
    }
  },
  refreshData: function refreshData() {
    var node1tag = parseInt(Math.random() * this._childNode.length);
    var addTag = parseInt(Math.random() * (this._childNode.length - 2)) + 1;
    var node2tag = (node1tag + addTag) % this._childNode.length;
    var node1 = this._childNode[node1tag];
    var node2 = this._childNode[node2tag];
    var data1 = -1;
    var data2 = -1;

    for (var i = 0; i < this._showData.length; i++) {
      if (this._showData[i] == false) {
        if (data1 == -1) {
          data1 = i;
        } else if (data2 == -1) {
          data2 = i;
          break;
        }
      }
    }

    if (data1 != -1) {
      node1.getComponent('lieyou_qGamemoreGame_icon').setData(this._obj[data1], this.touchType);
      this._showData[this._childNodeTag[node1tag]] = false;
      this._showData[data1] = true;
      this._childNodeTag[node1tag] = data1;

      if (data2 != -1) {
        node2.getComponent('lieyou_qGamemoreGame_icon').setData(this._obj[data2], this.touchType);
        this._showData[this._childNodeTag[node2tag]] = false;
        this._showData[data2] = true;
        this._childNodeTag[node2tag] = data2;
      }
    } else {
      node1.getComponent('lieyou_qGamemoreGame_icon').setData(this._obj[this._childNodeTag[node2tag]], this.touchType);
      node2.getComponent('lieyou_qGamemoreGame_icon').setData(this._obj[this._childNodeTag[node1tag]], this.touchType);
      var tagnode2 = this._childNodeTag[node2tag];
      this._childNodeTag[node2tag] = this._childNodeTag[node1tag];
      this._childNodeTag[node1tag] = tagnode2;
    }
  },
  refreshMoreGameNodePos: function refreshMoreGameNodePos() {
    var type = this.type;
    var deltaX = 1;
    var deltaY = 1;

    for (var i = 0; i < this._moreGameNode.length; i++) {
      var node = this._moreGameNode[i];
      var endPos = node.endPos;
      var begPos = node.begPos;

      if (type == 1) {
        node.x += deltaX;

        if (node.x >= endPos.x) {
          node.x = begPos.x;
        }
      } else {
        node.y += deltaY;

        if (node.y >= endPos.y) {
          node.y = begPos.y;
        }
      }
    }
  },
  myMove: function myMove(node, endPos, begPos) {
    this._moreGameNode.push(node);

    node.endPos = endPos;
    node.begPos = begPos; // var speed = 50;
    // var time = node.getPosition().sub(endPos).mag()/speed;
    // node.runAction(cc.sequence(cc.moveTo(time,endPos),cc.callFunc(()=>{
    //     node.position = begPos;
    //     this.myMove(node,endPos,begPos);
    // })));
  } // update (dt) {},

}); //全民绳索营救
//做杯奶加茶

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xccmVzb3VyY2VzXFxTREtcXG1vZHVsZVxccWdhbWVNb3JlR2FtZVxcbGlleW91X3FHYW1lbW9yZUdhbWVfbWlkLmpzIl0sIm5hbWVzIjpbImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiZk5vZGUiLCJOb2RlIiwidHlwZSIsIm9uTG9hZCIsIm9uRGlzYWJsZSIsImxpZXlvdV9TZGtNYW5hZ2VyIiwic2hvd01vcmVHYW1lSWNvbiIsInN0YXJ0IiwiaGlkZU1vcmVHYW1lSWNvbiIsIndpblNpemUiLCJ3aW5zaXplV2lkdGgiLCJoZWlnaHQiLCJ3aWR0aCIsInNldERhdGEiLCJvYmoiLCJpc1J1biIsInJlZnJlc2hUaW1lIiwicnVuVHlwZSIsIm9iakxlbmd0aCIsImxlbmd0aCIsIm1heEwiLCJsaWV5b3Vfc2hvd01vcmVHYW1lTnVtIiwiaSIsInB1c2giLCJ0b3VjaFR5cGUiLCJfb2JqIiwiX2NoaWxkTm9kZSIsIl9jaGlsZE5vZGVUYWciLCJfc2hvd0RhdGEiLCJfbW9yZUdhbWVOb2RlIiwibm9kZSIsImljb25QcmVmYWIiLCJhZGRDaGlsZCIsImdldENvbXBvbmVudCIsImhhbmdOdW0iLCJoYW5nTnVtMiIsIngiLCJwYXJzZUludCIsInkiLCJteU1vdmUiLCJ2MiIsInBvc3kiLCJzY2hlZHVsZSIsInJlZnJlc2hNb3JlR2FtZU5vZGVQb3MiLCJydW5BY3Rpb24iLCJyZXBlYXRGb3JldmVyIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJtb3ZlVG8iLCJjYWxsRnVuYyIsIm1vdmVCeSIsImZQb3NYIiwicmVmcmVzaERhdGEiLCJub2RlMXRhZyIsIk1hdGgiLCJyYW5kb20iLCJhZGRUYWciLCJub2RlMnRhZyIsIm5vZGUxIiwibm9kZTIiLCJkYXRhMSIsImRhdGEyIiwidGFnbm9kZTIiLCJkZWx0YVgiLCJkZWx0YVkiLCJlbmRQb3MiLCJiZWdQb3MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUFBLEVBQUUs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LEVBQThDO0FBQzFDLFVBQUlRLElBQUksR0FBRyxLQUFLRCxhQUFMLENBQW1CUCxDQUFuQixDQUFYO0FBQ0EsVUFBSTJDLE1BQU0sR0FBR25DLElBQUksQ0FBQ21DLE1BQWxCO0FBQ0EsVUFBSUMsTUFBTSxHQUFHcEMsSUFBSSxDQUFDb0MsTUFBbEI7O0FBQ0EsVUFBR2hFLElBQUksSUFBSSxDQUFYLEVBQWE7QUFDVDRCLFFBQUFBLElBQUksQ0FBQ00sQ0FBTCxJQUFVMkIsTUFBVjs7QUFDQSxZQUFHakMsSUFBSSxDQUFDTSxDQUFMLElBQVU2QixNQUFNLENBQUM3QixDQUFwQixFQUFzQjtBQUNsQk4sVUFBQUEsSUFBSSxDQUFDTSxDQUFMLEdBQVM4QixNQUFNLENBQUM5QixDQUFoQjtBQUNIO0FBQ0osT0FMRCxNQUtLO0FBQ0ROLFFBQUFBLElBQUksQ0FBQ1EsQ0FBTCxJQUFVMEIsTUFBVjs7QUFDQSxZQUFHbEMsSUFBSSxDQUFDUSxDQUFMLElBQVUyQixNQUFNLENBQUMzQixDQUFwQixFQUFzQjtBQUNsQlIsVUFBQUEsSUFBSSxDQUFDUSxDQUFMLEdBQVM0QixNQUFNLENBQUM1QixDQUFoQjtBQUNIO0FBQ0o7QUFDSjtBQUNKLEdBOUtJO0FBK0tMQyxFQUFBQSxNQS9LSyxrQkErS0VULElBL0tGLEVBK0tPbUMsTUEvS1AsRUErS2NDLE1BL0tkLEVBK0txQjtBQUN0QixTQUFLckMsYUFBTCxDQUFtQk4sSUFBbkIsQ0FBd0JPLElBQXhCOztBQUNBQSxJQUFBQSxJQUFJLENBQUNtQyxNQUFMLEdBQWNBLE1BQWQ7QUFDQW5DLElBQUFBLElBQUksQ0FBQ29DLE1BQUwsR0FBY0EsTUFBZCxDQUhzQixDQUl0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSCxHQXpMSSxDQTBMTDs7QUExTEssQ0FBVCxHQTRMQTtBQUNBIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgZk5vZGU6IGNjLk5vZGUsXHJcbiAgICAgICAgdHlwZTogMixcclxuICAgIH0sXHJcblxyXG4gICAgb25Mb2FkICgpIHtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIG9uRGlzYWJsZSgpe1xyXG4gICAgICAgIGxpZXlvdV9TZGtNYW5hZ2VyLnNob3dNb3JlR2FtZUljb24oKTtcclxuICAgIH0sXHJcbiAgICBzdGFydCAoKSB7XHJcbiAgICAgICAgbGlleW91X1Nka01hbmFnZXIuaGlkZU1vcmVHYW1lSWNvbigpO1xyXG4gICAgICAgIHZhciB3aW5TaXplID0gY2Mud2luU2l6ZTtcclxuICAgICAgICB2YXIgd2luc2l6ZVdpZHRoID0gd2luU2l6ZS5oZWlnaHQ+d2luU2l6ZS53aWR0aD93aW5TaXplLndpZHRoOndpblNpemUuaGVpZ2h0O1xyXG4gICAgICAgIC8vIHRoaXMubm9kZS5zY2FsZSA9IHdpbnNpemVXaWR0aC83MjAgKiAxLjE7XHJcbiAgICB9LFxyXG4gICAgc2V0RGF0YShvYmosaXNSdW4scmVmcmVzaFRpbWUscnVuVHlwZSA9IDEpe1xyXG4gICAgICAgIC8vcnVuVHlwZSAxOnBhZ2UgMjptb3ZlIDM6Y2hhbmdlIDQ6cGFnZU9uZVxyXG4gICAgICAgIHZhciBvYmpMZW5ndGggPSBvYmoubGVuZ3RoO1xyXG4gICAgICAgIHZhciBtYXhMID0gbGlleW91X3Nob3dNb3JlR2FtZU51bTtcclxuICAgICAgICBpZih0aGlzLnR5cGUgPT0gMyl7XHJcbiAgICAgICAgICAgIG1heEwgPSA5OyBcclxuICAgICAgICAgICAgcnVuVHlwZSA9IDI7Ly8zMzMgICBcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLnR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgIG1heEwgPSA4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih0aGlzLnR5cGUgPT0gMyB8fCB0aGlzLnR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgIGlmKHJ1blR5cGUgPT0gMSB8fCBydW5UeXBlID09IDQpe1xyXG4gICAgICAgICAgICAgICAgbWF4TCA9IG1heEwqMjtcclxuICAgICAgICAgICAgfWVsc2UgaWYocnVuVHlwZSA9PSAyICYmIHRoaXMudHlwZSA9PSAyKXtcclxuICAgICAgICAgICAgICAgIG1heEwgPSBtYXhMKzQ7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHJ1blR5cGUgPT0gMiAmJiB0aGlzLnR5cGUgPT0gMyl7XHJcbiAgICAgICAgICAgICAgICBtYXhMID0gbWF4TCszO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcih2YXIgaSA9IG9iai5sZW5ndGg7aSA8IG1heEw7aSsrKXtcclxuICAgICAgICAgICAgb2JqLnB1c2gob2JqW2klb2JqTGVuZ3RoXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudG91Y2hUeXBlID0gMyt0aGlzLnR5cGU7XHJcbiAgICAgICAgaWYodGhpcy50eXBlID09IDMpe1xyXG4gICAgICAgICAgICB0aGlzLnRvdWNoVHlwZSA9IDc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX29iaiA9IG9iajtcclxuICAgICAgICB0aGlzLl9jaGlsZE5vZGUgPSBbXTtcclxuICAgICAgICB0aGlzLl9jaGlsZE5vZGVUYWcgPSBbXTtcclxuICAgICAgICB0aGlzLl9zaG93RGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuX21vcmVHYW1lTm9kZSA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7aSA8IG9iai5sZW5ndGggJiYgaSA8IG1heEw7aSsrKXtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmljb25QcmVmYWIoKTtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGROb2RlW2ldID0gbm9kZTtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGROb2RlVGFnW2ldID0gaTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0RhdGFbaV0gPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmZOb2RlLmFkZENoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICBub2RlLmdldENvbXBvbmVudCgnbGlleW91X3FHYW1lbW9yZUdhbWVfaWNvbicpLnNldERhdGEob2JqW2ldLHRoaXMudG91Y2hUeXBlKTtcclxuICAgICAgICAgICAgdmFyIGhhbmdOdW0gPSA0O1xyXG4gICAgICAgICAgICB2YXIgaGFuZ051bTIgPSA0O1xyXG4gICAgICAgICAgICBpZih0aGlzLnR5cGUgPT0gMyl7XHJcbiAgICAgICAgICAgICAgICBoYW5nTnVtID0gMztcclxuICAgICAgICAgICAgICAgIGhhbmdOdW0yID0gMztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihydW5UeXBlID09IDEgfHwgcnVuVHlwZSA9PSA0KXtcclxuICAgICAgICAgICAgICAgIGhhbmdOdW0gPSBoYW5nTnVtKjI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy50eXBlID09IDMpe1xyXG4gICAgICAgICAgICAgICAgbm9kZS54ID0gLTE0MCArIGklaGFuZ051bSoxNDAgKyAxMCpwYXJzZUludChpJWhhbmdOdW0vaGFuZ051bTIpKihydW5UeXBlPT0xPzE6MCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLnkgPSAyODAgLSBwYXJzZUludChpL2hhbmdOdW0pKjE0MDsvLzMzM1xyXG4gICAgICAgICAgICB9ZWxzZSBpZih0aGlzLnR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgICAgICBub2RlLnggPSAtMjEwICsgaSVoYW5nTnVtKjE0MCArIDEwKnBhcnNlSW50KGklaGFuZ051bS9oYW5nTnVtMikqKHJ1blR5cGU9PTE/MTowKTtcclxuICAgICAgICAgICAgICAgIG5vZGUueSA9IDcwIC0gcGFyc2VJbnQoaS9oYW5nTnVtKSoxNDA7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbm9kZS54ID0gLTIxMCArIGkqMTQwO1xyXG4gICAgICAgICAgICAgICAgaWYob2JqLmxlbmd0aCA+PSA1ICYmIGlzUnVuKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm15TW92ZShub2RlLGNjLnYyKC0yMTAgKyAob2JqLmxlbmd0aC0xKSoxNDAsMCksY2MudjIoLTM1MCwwKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodGhpcy50eXBlID09IDIgfHwgdGhpcy50eXBlID09IDMpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc3kgPSAyODA7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLnR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zeSA9IDIxMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKHJ1blR5cGUgPT0gMil7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5teU1vdmUobm9kZSxjYy52Mihub2RlLngscG9zeSksY2MudjIobm9kZS54LC1wb3N5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy5fbW9yZUdhbWVOb2RlLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMucmVmcmVzaE1vcmVHYW1lTm9kZVBvcywxLzYwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodGhpcy50eXBlID09IDIgfHwgdGhpcy50eXBlID09IDMpe1xyXG4gICAgICAgICAgICBpZihydW5UeXBlID09IDEpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mTm9kZS5ydW5BY3Rpb24oY2MucmVwZWF0Rm9yZXZlcihjYy5zZXF1ZW5jZShjYy5kZWxheVRpbWUoMyksY2MubW92ZVRvKDAuMiwtNTcwLDApLGNjLmRlbGF5VGltZSgzKSxjYy5jYWxsRnVuYygoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZk5vZGUueCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9KSkpKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYocnVuVHlwZSA9PSA0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZk5vZGUucnVuQWN0aW9uKGNjLnJlcGVhdEZvcmV2ZXIoY2Muc2VxdWVuY2UoY2MuZGVsYXlUaW1lKDMpLGNjLm1vdmVCeSgwLjIsLTE0MCwwKSxjYy5jYWxsRnVuYygoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmUG9zWCA9IHRoaXMuZk5vZGUueDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwO2kgPCB0aGlzLl9jaGlsZE5vZGUubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuX2NoaWxkTm9kZVtpXS54K2ZQb3NYIDw9IC0yNTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2hpbGROb2RlW2ldLnggPSA3NzAtZlBvc1g7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IobGV0IGkgPSA4O2kgPCBvYmoubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dEYXRhW2ldID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRoaXMudHlwZSA9PSAyIHx8IHRoaXMudHlwZSA9PSAzKXtcclxuICAgICAgICAgICAgaWYocnVuVHlwZSA9PSAzKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy5yZWZyZXNoRGF0YSxyZWZyZXNoVGltZSk7Ly9yZWZyZXNoVGltZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHJlZnJlc2hEYXRhKCl7XHJcbiAgICAgICAgdmFyIG5vZGUxdGFnID0gcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIHRoaXMuX2NoaWxkTm9kZS5sZW5ndGgpO1xyXG4gICAgICAgIHZhciBhZGRUYWcgPSBwYXJzZUludChNYXRoLnJhbmRvbSgpICogKHRoaXMuX2NoaWxkTm9kZS5sZW5ndGgtMikpICsgMTtcclxuICAgICAgICB2YXIgbm9kZTJ0YWcgPSAobm9kZTF0YWcgKyBhZGRUYWcpJXRoaXMuX2NoaWxkTm9kZS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIG5vZGUxID0gdGhpcy5fY2hpbGROb2RlW25vZGUxdGFnXTtcclxuICAgICAgICB2YXIgbm9kZTIgPSB0aGlzLl9jaGlsZE5vZGVbbm9kZTJ0YWddO1xyXG4gICAgICAgIHZhciBkYXRhMSA9IC0xO1xyXG4gICAgICAgIHZhciBkYXRhMiA9IC0xO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7aSA8IHRoaXMuX3Nob3dEYXRhLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBpZih0aGlzLl9zaG93RGF0YVtpXSA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhMSA9PSAtMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTEgPSBpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoZGF0YTIgPT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEyID0gaTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkYXRhMSAhPSAtMSl7XHJcbiAgICAgICAgICAgIG5vZGUxLmdldENvbXBvbmVudCgnbGlleW91X3FHYW1lbW9yZUdhbWVfaWNvbicpLnNldERhdGEodGhpcy5fb2JqW2RhdGExXSx0aGlzLnRvdWNoVHlwZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dEYXRhW3RoaXMuX2NoaWxkTm9kZVRhZ1tub2RlMXRhZ11dID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dEYXRhW2RhdGExXSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkTm9kZVRhZ1tub2RlMXRhZ10gPSBkYXRhMTtcclxuICAgICAgICAgICAgaWYoZGF0YTIgIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgbm9kZTIuZ2V0Q29tcG9uZW50KCdsaWV5b3VfcUdhbWVtb3JlR2FtZV9pY29uJykuc2V0RGF0YSh0aGlzLl9vYmpbZGF0YTJdLHRoaXMudG91Y2hUeXBlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Nob3dEYXRhW3RoaXMuX2NoaWxkTm9kZVRhZ1tub2RlMnRhZ11dID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zaG93RGF0YVtkYXRhMl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hpbGROb2RlVGFnW25vZGUydGFnXSA9IGRhdGEyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIG5vZGUxLmdldENvbXBvbmVudCgnbGlleW91X3FHYW1lbW9yZUdhbWVfaWNvbicpLnNldERhdGEodGhpcy5fb2JqW3RoaXMuX2NoaWxkTm9kZVRhZ1tub2RlMnRhZ11dLHRoaXMudG91Y2hUeXBlKTtcclxuICAgICAgICAgICAgbm9kZTIuZ2V0Q29tcG9uZW50KCdsaWV5b3VfcUdhbWVtb3JlR2FtZV9pY29uJykuc2V0RGF0YSh0aGlzLl9vYmpbdGhpcy5fY2hpbGROb2RlVGFnW25vZGUxdGFnXV0sdGhpcy50b3VjaFR5cGUpO1xyXG4gICAgICAgICAgICB2YXIgdGFnbm9kZTIgPSB0aGlzLl9jaGlsZE5vZGVUYWdbbm9kZTJ0YWddO1xyXG4gICAgICAgICAgICB0aGlzLl9jaGlsZE5vZGVUYWdbbm9kZTJ0YWddID0gdGhpcy5fY2hpbGROb2RlVGFnW25vZGUxdGFnXTtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGROb2RlVGFnW25vZGUxdGFnXSA9IHRhZ25vZGUyO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZWZyZXNoTW9yZUdhbWVOb2RlUG9zKCl7XHJcbiAgICAgICAgbGV0IHR5cGUgPSB0aGlzLnR5cGU7XHJcbiAgICAgICAgbGV0IGRlbHRhWCA9IDE7XHJcbiAgICAgICAgbGV0IGRlbHRhWSA9IDE7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPHRoaXMuX21vcmVHYW1lTm9kZS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgbGV0IG5vZGUgPSB0aGlzLl9tb3JlR2FtZU5vZGVbaV07XHJcbiAgICAgICAgICAgIGxldCBlbmRQb3MgPSBub2RlLmVuZFBvcztcclxuICAgICAgICAgICAgbGV0IGJlZ1BvcyA9IG5vZGUuYmVnUG9zO1xyXG4gICAgICAgICAgICBpZih0eXBlID09IDEpe1xyXG4gICAgICAgICAgICAgICAgbm9kZS54ICs9IGRlbHRhWDtcclxuICAgICAgICAgICAgICAgIGlmKG5vZGUueCA+PSBlbmRQb3MueCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS54ID0gYmVnUG9zLng7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbm9kZS55ICs9IGRlbHRhWTtcclxuICAgICAgICAgICAgICAgIGlmKG5vZGUueSA+PSBlbmRQb3MueSl7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS55ID0gYmVnUG9zLnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbXlNb3ZlKG5vZGUsZW5kUG9zLGJlZ1Bvcyl7XHJcbiAgICAgICAgdGhpcy5fbW9yZUdhbWVOb2RlLnB1c2gobm9kZSk7XHJcbiAgICAgICAgbm9kZS5lbmRQb3MgPSBlbmRQb3M7XHJcbiAgICAgICAgbm9kZS5iZWdQb3MgPSBiZWdQb3M7XHJcbiAgICAgICAgLy8gdmFyIHNwZWVkID0gNTA7XHJcbiAgICAgICAgLy8gdmFyIHRpbWUgPSBub2RlLmdldFBvc2l0aW9uKCkuc3ViKGVuZFBvcykubWFnKCkvc3BlZWQ7XHJcbiAgICAgICAgLy8gbm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoY2MubW92ZVRvKHRpbWUsZW5kUG9zKSxjYy5jYWxsRnVuYygoKT0+e1xyXG4gICAgICAgIC8vICAgICBub2RlLnBvc2l0aW9uID0gYmVnUG9zO1xyXG4gICAgICAgIC8vICAgICB0aGlzLm15TW92ZShub2RlLGVuZFBvcyxiZWdQb3MpO1xyXG4gICAgICAgIC8vIH0pKSk7XHJcbiAgICB9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcbn0pO1xyXG4vL+WFqOawkee7s+e0ouiQpeaVkVxyXG4vL+WBmuadr+WltuWKoOiMtiJdfQ==