
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/resources/SDK/scripts/lieyou_webManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e8acd6T5GNKmKx0ZjnjBbfX', 'lieyou_webManager');
// resources/SDK/scripts/lieyou_webManager.js

"use strict";

window.lieyou_cpp_Calljs_setMusic = function (Play) {
  if (Play) {
    cc.game.resume();
  } else {
    cc.game.pause();
  }
};

var lieyou_webManager = cc.Class({
  "extends": require('BaseManager'),
  properties: {
    payCallBack: null,
    playVDCallBack: null
  },
  getHaveVideo: function getHaveVideo() {
    if (this.isOpen(KEY_OPEN_VIDEO)) {
      lieyou_showLog("h5-可以看视频");
      return true;
    }

    lieyou_showLog("h5-不能看视频");
    return false;
  },
  getSysPlatform_string: function getSysPlatform_string() {
    return 'web';
  },
  getSysPlatform: function getSysPlatform() {
    return 14;
  },
  setOnlineData: function setOnlineData(data) {
    if (data.web) {
      var adData = {};

      if (data.web.theme) {
        adData.theme = data.web.theme;
      }

      if (data.web.crossSwitch) {
        adData.crossSwitch = data.web.crossSwitch;
      }

      if (data.web.bizData) {
        adData.bizData = data.web.bizData;
      }

      if (data.web.ad_datas) {
        adData.ad_datas = data.web.ad_datas; // GamePlay.setGamePortalData(JSON.stringify(data.web.ad_datas));
      }

      if (data.web["switch"]) {
        adData["switch"] = data.web["switch"];
      }

      this.setAdData(adData);
    }
  },
  getStringValue: function getStringValue(key) {
    return GamePlay.getStringValue(key);
  },
  init: function init(obj) {
    lieyou_showLog("h5-初始化");
    GamePlay.cancelCocos();

    this._super();

    this.base_IsShenHe = this.isOpen(KEY_IS_SHENHE); // var source = GamePlay.getSource();

    this.initOnlineData();
  },
  vibrateShort: function vibrateShort() {
    this.vibrateCustom(30);
  },
  vibrateLong: function vibrateLong() {
    this.vibrateCustom(100);
  },
  vibrateCustom: function vibrateCustom(time) {
    lieyou_showLog("h5-震动:" + time);
    GamePlay.Vibrate(time);
  },
  showNativeBanner: function showNativeBanner(top) {
    GamePlay.showNativeView(top);
  },
  hideNativeBanner: function hideNativeBanner() {
    GamePlay.closeNativeView();
  },
  showPauseAd: function showPauseAd(isHaveNative, top) {
    GamePlay.showPauseAd(isHaveNative, top);
  },
  showResultAd: function showResultAd(isHaveNative, top) {
    GamePlay.showResultAd(isHaveNative, top);
  },
  showSpotByBegin: function showSpotByBegin(isHaveNative, top) {},
  showSpotByPause: function showSpotByPause(isHaveNative, top) {
    lieyou_showLog("h5-暂停插屏");
    this.showPauseAd(isHaveNative, top);
  },
  showSpotByFinish: function showSpotByFinish(isHaveNative, top) {
    lieyou_showLog("h5-结束插屏");
    this.showResultAd(isHaveNative, top);
  },
  callPay: function callPay(action, funS) {
    this.payCallBack = funS;
    GamePlay.callPay(action);
  },
  callAndroid: function callAndroid(action) {
    GamePlay.callAndroid(action);
  },
  callAndroid_2: function callAndroid_2(action, funS) {
    this.playVDCallBack = funS;
    GamePlay.callPay(action);
  },
  //是否可以显示 开关
  isOpen: function isOpen(key) {
    var ss = 0;
    ss = GamePlay.getValue2(key);
    ss = parseInt(ss);
    lieyou_showLog("h5-获取开关:" + key + ":" + ss);

    if (ss == 1) {
      return true;
    } else {
      return false;
    }
  },
  isOpenInt: function isOpenInt(key) {
    var ss = 0;
    ss = GamePlay.getValue2(key);
    ss = parseInt(ss);
    lieyou_showLog("h5-获取开关:" + key + ":" + ss);
    return ss;
  },
  showRewardedVideoAd: function showRewardedVideoAd(id, callBack) {
    lieyou_showLog("h5-播放视频");
    this.callAndroid_2(ACTION_AD_WATCH, callBack);
  },
  showBannerCustom: function showBannerCustom(obj) {
    this.showBanner();
  },
  showBannerByBottom: function showBannerByBottom(id) {
    this.showBanner();
  },
  showBannerByTop: function showBannerByTop(id) {
    this.showBanner();
  },
  showBanner: function showBanner() {
    lieyou_showLog("h5-显示banner");

    if (this._showBanner) {
      return;
    }

    this._showBanner = true;
    this.callAndroid(ACTION_BANNER_SHOW);
  },
  hideBanner: function hideBanner() {
    lieyou_showLog("h5-隐藏banner");
    this._showBanner = false;
    this.callAndroid(ACTION_BANNER_HIDE);
  },
  showRate: function showRate() {
    this.callAndroid(ACTION_RATE);
  },
  newJumpApp: function newJumpApp(obj) {
    if (obj.success) {
      obj.success();
    }

    obj.umid = oppoGetOnlineDataId;
    GamePlay.startWeb(JSON.stringify(obj.data));
  },
  showNativeHideBanner: function showNativeHideBanner(node) {
    var _this = this;

    var showM = false;

    if (this.moreGameBanner && this.moreGameBanner.isValid) {
      showM = true;
    }

    var showB = this._showBanner;
    var baseNodejs = node.addComponent('lieyou_baseNode');

    baseNodejs.enableCallBack = function () {
      lieyou_SdkManager.hideBanner();
    };

    baseNodejs.destroyCallBack = function () {
      if (showB) {
        _this.showBanner();
      } else if (showM) {
        lieyou_SdkManager.showMoreGameByBanner();
      }
    };
  }
});
module.exports = lieyou_webManager;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xccmVzb3VyY2VzXFxTREtcXHNjcmlwdHNcXGxpZXlvdV93ZWJNYW5hZ2VyLmpzIl0sIm5hbWVzIjpbIndpbmRvdyIsImxpZXlvdV9jcHBfQ2FsbGpzX3NldE11c2ljIiwiUGxheSIsImNjIiwiZ2FtZSIsInJlc3VtZSIsInBhdXNlIiwibGlleW91X3dlYk1hbmFnZXIiLCJDbGFzcyIsInJlcXVpcmUiLCJwcm9wZXJ0aWVzIiwicGF5Q2FsbEJhY2siLCJwbGF5VkRDYWxsQmFjayIsImdldEhhdmVWaWRlbyIsImlzT3BlbiIsIktFWV9PUEVOX1ZJREVPIiwibGlleW91X3Nob3dMb2ciLCJnZXRTeXNQbGF0Zm9ybV9zdHJpbmciLCJnZXRTeXNQbGF0Zm9ybSIsInNldE9ubGluZURhdGEiLCJkYXRhIiwid2ViIiwiYWREYXRhIiwidGhlbWUiLCJjcm9zc1N3aXRjaCIsImJpekRhdGEiLCJhZF9kYXRhcyIsInNldEFkRGF0YSIsImdldFN0cmluZ1ZhbHVlIiwia2V5IiwiR2FtZVBsYXkiLCJpbml0Iiwib2JqIiwiY2FuY2VsQ29jb3MiLCJfc3VwZXIiLCJiYXNlX0lzU2hlbkhlIiwiS0VZX0lTX1NIRU5IRSIsImluaXRPbmxpbmVEYXRhIiwidmlicmF0ZVNob3J0IiwidmlicmF0ZUN1c3RvbSIsInZpYnJhdGVMb25nIiwidGltZSIsIlZpYnJhdGUiLCJzaG93TmF0aXZlQmFubmVyIiwidG9wIiwic2hvd05hdGl2ZVZpZXciLCJoaWRlTmF0aXZlQmFubmVyIiwiY2xvc2VOYXRpdmVWaWV3Iiwic2hvd1BhdXNlQWQiLCJpc0hhdmVOYXRpdmUiLCJzaG93UmVzdWx0QWQiLCJzaG93U3BvdEJ5QmVnaW4iLCJzaG93U3BvdEJ5UGF1c2UiLCJzaG93U3BvdEJ5RmluaXNoIiwiY2FsbFBheSIsImFjdGlvbiIsImZ1blMiLCJjYWxsQW5kcm9pZCIsImNhbGxBbmRyb2lkXzIiLCJzcyIsImdldFZhbHVlMiIsInBhcnNlSW50IiwiaXNPcGVuSW50Iiwic2hvd1Jld2FyZGVkVmlkZW9BZCIsImlkIiwiY2FsbEJhY2siLCJBQ1RJT05fQURfV0FUQ0giLCJzaG93QmFubmVyQ3VzdG9tIiwic2hvd0Jhbm5lciIsInNob3dCYW5uZXJCeUJvdHRvbSIsInNob3dCYW5uZXJCeVRvcCIsIl9zaG93QmFubmVyIiwiQUNUSU9OX0JBTk5FUl9TSE9XIiwiaGlkZUJhbm5lciIsIkFDVElPTl9CQU5ORVJfSElERSIsInNob3dSYXRlIiwiQUNUSU9OX1JBVEUiLCJuZXdKdW1wQXBwIiwic3VjY2VzcyIsInVtaWQiLCJvcHBvR2V0T25saW5lRGF0YUlkIiwic3RhcnRXZWIiLCJKU09OIiwic3RyaW5naWZ5Iiwic2hvd05hdGl2ZUhpZGVCYW5uZXIiLCJub2RlIiwic2hvd00iLCJtb3JlR2FtZUJhbm5lciIsImlzVmFsaWQiLCJzaG93QiIsImJhc2VOb2RlanMiLCJhZGRDb21wb25lbnQiLCJlbmFibGVDYWxsQmFjayIsImxpZXlvdV9TZGtNYW5hZ2VyIiwiZGVzdHJveUNhbGxCYWNrIiwic2hvd01vcmVHYW1lQnlCYW5uZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxNQUFNLENBQUNDLDBCQUFQLEdBQW9DLFVBQVNDLElBQVQsRUFBYztBQUM5QyxNQUFHQSxJQUFILEVBQVE7QUFDSkMsSUFBQUEsRUFBRSxDQUFDQyxJQUFILENBQVFDLE1BQVI7QUFDSCxHQUZELE1BRUs7QUFDREYsSUFBQUEsRUFBRSxDQUFDQyxJQUFILENBQVFFLEtBQVI7QUFDSDtBQUNKLENBTkQ7O0FBT0EsSUFBSUMsaUJBQWlCLEdBQUdKLEVBQUUsQ0FBQ0ssS0FBSCxDQUFTO0FBQ2hDLGFBQVNDLE9BQU8sQ0FBQyxhQUFELENBRGdCO0FBRWhDQyxFQUFBQSxVQUFVLEVBQUM7QUFDSkMsSUFBQUEsV0FBVyxFQUFDLElBRFI7QUFFSkMsSUFBQUEsY0FBYyxFQUFDO0FBRlgsR0FGcUI7QUFNN0JDLEVBQUFBLFlBTjZCLDBCQU1mO0FBQ1YsUUFBRyxLQUFL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R0wsSUFBSSxDQUFDTSxZQUFMLENBQWtCLGlCQUFsQixDQUFqQjs7QUFDQUQsSUFBQUEsVUFBVSxDQUFDRSxjQUFYLEdBQTRCLFlBQUk7QUFDNUJDLE1BQUFBLGlCQUFpQixDQUFDcEIsVUFBbEI7QUFDSCxLQUZEOztBQUdBaUIsSUFBQUEsVUFBVSxDQUFDSSxlQUFYLEdBQTZCLFlBQUk7QUFDN0IsVUFBR0wsS0FBSCxFQUFTO0FBQ0wsUUFBQSxLQUFJLENBQUNyQixVQUFMO0FBQ0gsT0FGRCxNQUVNLElBQUdrQixLQUFILEVBQVM7QUFDWE8sUUFBQUEsaUJBQWlCLENBQUNFLG9CQUFsQjtBQUNIO0FBQ0osS0FORDtBQU9IO0FBcEw0QixDQUFULENBQXhCO0FBc0xBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUIxRixpQkFBakIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG53aW5kb3cubGlleW91X2NwcF9DYWxsanNfc2V0TXVzaWMgPSBmdW5jdGlvbihQbGF5KXtcclxuICAgIGlmKFBsYXkpe1xyXG4gICAgICAgIGNjLmdhbWUucmVzdW1lKCk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBjYy5nYW1lLnBhdXNlKCk7XHJcbiAgICB9XHJcbn1cclxubGV0IGxpZXlvdV93ZWJNYW5hZ2VyID0gY2MuQ2xhc3Moe1xyXG5cdGV4dGVuZHM6IHJlcXVpcmUoJ0Jhc2VNYW5hZ2VyJyksXHJcblx0cHJvcGVydGllczp7XHJcbiAgICAgICAgcGF5Q2FsbEJhY2s6bnVsbCxcclxuICAgICAgICBwbGF5VkRDYWxsQmFjazpudWxsLFxyXG4gICAgfSxcclxuICAgIGdldEhhdmVWaWRlbygpe1xyXG4gICAgICAgIGlmKHRoaXMuaXNPcGVuKEtFWV9PUEVOX1ZJREVPKSl7XHJcbiAgICAgICAgICAgIGxpZXlvdV9zaG93TG9nKFwiaDUt5Y+v5Lul55yL6KeG6aKRXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGlleW91X3Nob3dMb2coXCJoNS3kuI3og73nnIvop4bpopFcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuICAgIGdldFN5c1BsYXRmb3JtX3N0cmluZygpe1xyXG5cdFx0cmV0dXJuICd3ZWInO1xyXG4gICAgfSxcclxuICAgIGdldFN5c1BsYXRmb3JtKCl7XHJcblx0XHRyZXR1cm4gMTQ7XHJcblx0fSxcclxuICAgIHNldE9ubGluZURhdGEoZGF0YSl7XHJcbiAgICAgICAgaWYoZGF0YS53ZWIpe1xyXG4gICAgICAgICAgICB2YXIgYWREYXRhID0ge307XHJcbiAgICAgICAgICAgIGlmKGRhdGEud2ViLnRoZW1lKXtcclxuICAgICAgICAgICAgICAgIGFkRGF0YS50aGVtZSA9IGRhdGEud2ViLnRoZW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGRhdGEud2ViLmNyb3NzU3dpdGNoKXtcclxuICAgICAgICAgICAgICAgIGFkRGF0YS5jcm9zc1N3aXRjaCA9IGRhdGEud2ViLmNyb3NzU3dpdGNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGRhdGEud2ViLmJpekRhdGEpe1xyXG4gICAgICAgICAgICAgICAgYWREYXRhLmJpekRhdGEgPSBkYXRhLndlYi5iaXpEYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGRhdGEud2ViLmFkX2RhdGFzKXtcclxuICAgICAgICAgICAgICAgIGFkRGF0YS5hZF9kYXRhcyA9IGRhdGEud2ViLmFkX2RhdGFzO1xyXG4gICAgICAgICAgICAgICAgLy8gR2FtZVBsYXkuc2V0R2FtZVBvcnRhbERhdGEoSlNPTi5zdHJpbmdpZnkoZGF0YS53ZWIuYWRfZGF0YXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihkYXRhLndlYi5zd2l0Y2gpe1xyXG4gICAgICAgICAgICAgICAgYWREYXRhLnN3aXRjaCA9IGRhdGEud2ViLnN3aXRjaDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnNldEFkRGF0YShhZERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBnZXRTdHJpbmdWYWx1ZShrZXkpe1xyXG4gICAgICAgIHJldHVybiBHYW1lUGxheS5nZXRTdHJpbmdWYWx1ZShrZXkpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgaW5pdDogZnVuY3Rpb24ob2JqKXtcclxuICAgICAgICBsaWV5b3Vfc2hvd0xvZyhcImg1LeWIneWni+WMllwiKTtcclxuICAgICAgICBHYW1lUGxheS5jYW5jZWxDb2NvcygpO1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5iYXNlX0lzU2hlbkhlID0gdGhpcy5pc09wZW4oS0VZX0lTX1NIRU5IRSk7XHJcbiAgICAgICAgLy8gdmFyIHNvdXJjZSA9IEdhbWVQbGF5LmdldFNvdXJjZSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdE9ubGluZURhdGEoKTtcclxuICAgIH0sXHJcbiAgICB2aWJyYXRlU2hvcnQoKXtcclxuICAgICAgICB0aGlzLnZpYnJhdGVDdXN0b20oMzApO1xyXG4gICAgfSxcclxuICAgIHZpYnJhdGVMb25nKCl7XHJcbiAgICAgICAgdGhpcy52aWJyYXRlQ3VzdG9tKDEwMCk7XHJcbiAgICB9LFxyXG4gICAgdmlicmF0ZUN1c3RvbSh0aW1lKXtcclxuICAgICAgICBsaWV5b3Vfc2hvd0xvZyhcImg1Lemch+WKqDpcIit0aW1lKTtcclxuICAgICAgICBHYW1lUGxheS5WaWJyYXRlKHRpbWUpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgXHJcbiAgICBzaG93TmF0aXZlQmFubmVyKHRvcCl7XHJcbiAgICAgICAgR2FtZVBsYXkuc2hvd05hdGl2ZVZpZXcodG9wKTtcclxuICAgIH0sXHJcbiAgICBoaWRlTmF0aXZlQmFubmVyKCl7XHJcbiAgICAgICAgR2FtZVBsYXkuY2xvc2VOYXRpdmVWaWV3KCk7XHJcbiAgICB9LFxyXG4gICAgc2hvd1BhdXNlQWQoaXNIYXZlTmF0aXZlLHRvcCl7XHJcbiAgICAgICAgR2FtZVBsYXkuc2hvd1BhdXNlQWQoaXNIYXZlTmF0aXZlLHRvcCk7XHJcbiAgICB9LFxyXG4gICAgc2hvd1Jlc3VsdEFkKGlzSGF2ZU5hdGl2ZSx0b3Ape1xyXG4gICAgICAgIEdhbWVQbGF5LnNob3dSZXN1bHRBZChpc0hhdmVOYXRpdmUsdG9wKTtcclxuICAgIH0sXHJcbiAgICBzaG93U3BvdEJ5QmVnaW4oaXNIYXZlTmF0aXZlLHRvcCl7XHJcbiAgICB9LFxyXG4gICAgc2hvd1Nwb3RCeVBhdXNlKGlzSGF2ZU5hdGl2ZSx0b3Ape1xyXG4gICAgICAgIGxpZXlvdV9zaG93TG9nKFwiaDUt5pqC5YGc5o+S5bGPXCIpO1xyXG4gICAgICAgIHRoaXMuc2hvd1BhdXNlQWQoaXNIYXZlTmF0aXZlLHRvcCk7XHJcbiAgICB9LFxyXG4gICAgc2hvd1Nwb3RCeUZpbmlzaChpc0hhdmVOYXRpdmUsdG9wKXtcclxuICAgICAgICBsaWV5b3Vfc2hvd0xvZyhcImg1Lee7k+adn+aPkuWxj1wiKTtcclxuICAgICAgICB0aGlzLnNob3dSZXN1bHRBZChpc0hhdmVOYXRpdmUsdG9wKTtcclxuICAgIH0sXHJcbiAgICBjYWxsUGF5KGFjdGlvbixmdW5TKXtcclxuICAgICAgICB0aGlzLnBheUNhbGxCYWNrID0gZnVuUztcclxuICAgICAgICBHYW1lUGxheS5jYWxsUGF5KGFjdGlvbik7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBjYWxsQW5kcm9pZChhY3Rpb24pe1xyXG4gICAgICAgIEdhbWVQbGF5LmNhbGxBbmRyb2lkKGFjdGlvbik7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGxBbmRyb2lkXzIoYWN0aW9uLGZ1blMpe1xyXG4gICAgICAgIHRoaXMucGxheVZEQ2FsbEJhY2sgPSBmdW5TO1xyXG4gICAgICAgIEdhbWVQbGF5LmNhbGxQYXkoYWN0aW9uKTtcclxuICAgIH0sXHJcbiAgICAvL+aYr+WQpuWPr+S7peaYvuekuiDlvIDlhbNcclxuICAgIGlzT3BlbihrZXkpe1xyXG4gICAgICAgIHZhciBzcyA9IDA7XHJcbiAgICAgICAgc3MgPSBHYW1lUGxheS5nZXRWYWx1ZTIoa2V5KTtcclxuICAgICAgICBzcyA9IHBhcnNlSW50KHNzKTtcclxuICAgICAgICBsaWV5b3Vfc2hvd0xvZyhcImg1LeiOt+WPluW8gOWFszpcIitrZXkrXCI6XCIrc3MpO1xyXG4gICAgICAgIGlmKHNzID09IDEpe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBpc09wZW5JbnQoa2V5KXtcclxuICAgICAgICB2YXIgc3MgPSAwO1xyXG4gICAgICAgIHNzID0gR2FtZVBsYXkuZ2V0VmFsdWUyKGtleSk7XHJcbiAgICAgICAgc3MgPSBwYXJzZUludChzcyk7XHJcbiAgICAgICAgbGlleW91X3Nob3dMb2coXCJoNS3ojrflj5blvIDlhbM6XCIra2V5K1wiOlwiK3NzKTtcclxuICAgICAgICByZXR1cm4gc3M7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3dSZXdhcmRlZFZpZGVvQWQoaWQsY2FsbEJhY2spe1xyXG4gICAgICAgIGxpZXlvdV9zaG93TG9nKFwiaDUt5pKt5pS+6KeG6aKRXCIpO1xyXG4gICAgICAgIHRoaXMuY2FsbEFuZHJvaWRfMihBQ1RJT05fQURfV0FUQ0gsY2FsbEJhY2spO1xyXG4gICAgfSxcclxuXHJcbiAgICBzaG93QmFubmVyQ3VzdG9tKG9iail7XHJcbiAgICAgICAgdGhpcy5zaG93QmFubmVyKCk7XHJcbiAgICB9LFxyXG4gICAgc2hvd0Jhbm5lckJ5Qm90dG9tKGlkKXtcclxuICAgICAgICB0aGlzLnNob3dCYW5uZXIoKTtcclxuICAgIH0sXHJcbiAgICBzaG93QmFubmVyQnlUb3AoaWQpe1xyXG4gICAgICAgIHRoaXMuc2hvd0Jhbm5lcigpO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgc2hvd0Jhbm5lcigpe1xyXG4gICAgICAgIGxpZXlvdV9zaG93TG9nKFwiaDUt5pi+56S6YmFubmVyXCIpO1xyXG4gICAgICAgIGlmKHRoaXMuX3Nob3dCYW5uZXIpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3Nob3dCYW5uZXIgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2FsbEFuZHJvaWQoQUNUSU9OX0JBTk5FUl9TSE9XKTtcclxuICAgIH0sXHJcbiAgICBoaWRlQmFubmVyKCl7XHJcbiAgICAgICAgbGlleW91X3Nob3dMb2coXCJoNS3pmpDol49iYW5uZXJcIik7XHJcbiAgICAgICAgdGhpcy5fc2hvd0Jhbm5lciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2FsbEFuZHJvaWQoQUNUSU9OX0JBTk5FUl9ISURFKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIHNob3dSYXRlKCl7XHJcbiAgICAgICAgdGhpcy5jYWxsQW5kcm9pZChBQ1RJT05fUkFURSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBuZXdKdW1wQXBwKG9iail7XHJcbiAgICAgICAgaWYob2JqLnN1Y2Nlc3Mpe1xyXG4gICAgICAgICAgICBvYmouc3VjY2VzcygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBvYmoudW1pZCA9IG9wcG9HZXRPbmxpbmVEYXRhSWQ7XHJcbiAgICAgICAgR2FtZVBsYXkuc3RhcnRXZWIoSlNPTi5zdHJpbmdpZnkob2JqLmRhdGEpKTtcclxuICAgIH0sXHJcblxyXG4gICAgc2hvd05hdGl2ZUhpZGVCYW5uZXIobm9kZSl7XHJcbiAgICAgICAgdmFyIHNob3dNID0gZmFsc2U7XHJcbiAgICAgICAgaWYodGhpcy5tb3JlR2FtZUJhbm5lciAmJiB0aGlzLm1vcmVHYW1lQmFubmVyLmlzVmFsaWQpe1xyXG4gICAgICAgICAgICBzaG93TSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzaG93QiA9IHRoaXMuX3Nob3dCYW5uZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIGJhc2VOb2RlanMgPSBub2RlLmFkZENvbXBvbmVudCgnbGlleW91X2Jhc2VOb2RlJyk7XHJcbiAgICAgICAgYmFzZU5vZGVqcy5lbmFibGVDYWxsQmFjayA9ICgpPT57XHJcbiAgICAgICAgICAgIGxpZXlvdV9TZGtNYW5hZ2VyLmhpZGVCYW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmFzZU5vZGVqcy5kZXN0cm95Q2FsbEJhY2sgPSAoKT0+e1xyXG4gICAgICAgICAgICBpZihzaG93Qil7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dCYW5uZXIoKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYoc2hvd00pe1xyXG4gICAgICAgICAgICAgICAgbGlleW91X1Nka01hbmFnZXIuc2hvd01vcmVHYW1lQnlCYW5uZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSlcclxubW9kdWxlLmV4cG9ydHMgPSBsaWV5b3Vfd2ViTWFuYWdlcjtcclxuXHJcblxyXG5cclxuXHJcbiJdfQ==