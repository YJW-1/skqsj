
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/Ui/UiSign.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '50166BYVs5N7Kvw8u25M9Km', 'UiSign');
// script/Ui/UiSign.ts

Object.defineProperty(exports, "__esModule", { value: true });
var UIPage_1 = require("./UIPage");
var CocosZ_1 = require("../Framework/CocosZ");
var Constant_1 = require("../Framework/Constant");
var Msg_1 = require("../Framework/Msg");
var _a = cc._decorator, ccclass = _a.ccclass, property = _a.property;
var UiSign = /** @class */ (function (_super) {
    __extends(UiSign, _super);
    function UiSign() {
        var _this = _super.call(this) || this;
        _this.scaleNode = null;
        _this.btnGet = null;
        _this.btnBack = null;
        _this.lib = null;
        _this.lib1 = null;
        _this.lib2 = null;
        _this.prop = null;
        _this.text = null;
        _this.box = null;
        _this.halo = null;
        _this.halo2 = null;
        _this.halo3 = null;
        _this.num = null;
        _this._init();
        return _this;
    }
    UiSign.prototype._init = function () {
        var Game = CocosZ_1.cocosz.resMgr.getRes(Constant_1.PanelName.UiSign, cc.Prefab);
        if (Game) {
            var node = cc.instantiate(Game);
            if (node) {
                this._page = node;
                cc.find("Canvas/ui").addChild(node);
                node.active = true;
                node.position = cc.Vec2.ZERO;
                this._onLoad();
            }
        }
    };
    UiSign.prototype._onLoad = function () {
        this.scaleNode = this._page.getChildByName("scaleNode");
        this.btnGet = this.scaleNode.getChildByName("btn_get");
        this.prop = this.scaleNode.getChildByName("prop");
        this.btnBack = this.scaleNode.getChildByName("btn_back");
        this.halo = this.scaleNode.getChildByName("gift_icon_halo");
        this.halo2 = this.scaleNode.getChildByName("gift_icon_halo2");
        this.halo3 = this.scaleNode.getChildByName("gift_icon_halo2").getChildByName("gift_icon_halo3");
        this.lib = this.scaleNode.getChildByName("lid");
        this.lib1 = this.scaleNode.getChildByName("lid").getChildByName("gift_icon_lid_1");
        this.lib2 = this.scaleNode.getChildByName("lid").getChildByName("gift_icon_lid_2");
        this.box = this.scaleNode.getChildByName("lid").getChildByName("gift_icon_box");
        this._Start();
    };
    UiSign.prototype._checkCanBonus = function () {
        var curDate = new Date();
        var a = curDate.toDateString() != CocosZ_1.cocosz.dataMgr.LastBonusTime;
        // cocosz.dataMgr.LastBonusTime = curDate.toDateString();
        return a;
    };
    UiSign.prototype._Start = function () {
        var _this = this;
        this.btnBack.on(cc.Node.EventType.TOUCH_END, function () {
            _this.onBack();
        });
        this.btnGet.on(cc.Node.EventType.TOUCH_END, function () {
            _this.onGet();
        });
        if ((cc.sys.platform === cc.sys.VIVO_GAME)) {
            lieyou_SdkManager.showSpotByPause();
        }
        else if (cc.sys.platform === cc.sys.OPPO_GAME) {
            this.scaleNode.x = -341;
            var sp = CocosZ_1.cocosz.resMgr.getRes("ss", cc.SpriteFrame);
            lieyou_SdkManager.showNativeAd_big({
                node: this.scaleNode.getChildByName("nativePos"), "titleColor": cc.color(255, 255, 255, 255),
                "descColor": cc.color(255, 255, 255, 255), bgPath: 'texture/ss', texture: sp, scale: 0.9, insetTop: 10, insetBottom: 10, insetLeft: 10, insetRight: 10
            });
        }
    };
    UiSign.prototype.onOpen = function () {
        var _this = this;
        this.scaleNode.scale = 0;
        this.btnGet.scale = 0;
        // if ((cc.sys.platform === cc.sys.VIVO_GAME || cc.sys.platform === cc.sys.OPPO_GAME)) {
        //     lieyou_SdkManager.hideBanner();
        // }
        cc.tween(this.scaleNode)
            .to(0.2, { scale: 1.4 })
            .to(0.1, { scale: 1 })
            .call(function () {
            cc.tween(_this.lib)
                .by(0.15, { angle: 10 })
                .by(0.15, { angle: -10 })
                .by(0.1, { angle: 9 })
                .by(0.1, { angle: -9 })
                .by(0.07, { angle: 8 })
                .by(0.07, { angle: -8 })
                .by(0.07, { angle: 7 })
                .by(0.07, { angle: -7 })
                .by(0.07, { angle: 6 })
                .by(0.07, { angle: -6 })
                .by(0.07, { angle: 5 })
                .start();
        })
            .delay(1)
            .call(function () {
            cc.tween(_this.lib1)
                .by(1, { position: cc.v2(0, 150) })
                .call(function () {
                _this.lib1.opacity = 0;
                _this.prop.active = true;
                _this.prop.scale = 0;
                // this.text.active = true;
                cc.tween(_this.prop)
                    .to(0.2, { scale: 1 })
                    .start();
            })
                .start();
            _this.lib2.y += 150;
            cc.tween(_this.halo2)
                .to(1, { opacity: 255, scale: 2.5 })
                .call(function () {
                _this.lib2.active = true;
                _this.halo.active = true;
            })
                .to(1, { opacity: 0, scale: 1 })
                .start();
            cc.tween(_this.btnGet)
                .to(0.7, { scale: 1 })
                .start();
        })
            .start();
        cc.tween(this.halo)
            .repeatForever(cc.tween().by(3, { angle: 360 }))
            .start();
        cc.tween(this.halo3)
            .repeatForever(cc.tween().by(3, { angle: 360 }))
            .start();
        // lieyou_SdkManager.showBannerByBottom();
        // if (cc.sys.platform === cc.sys.VIVO_GAME) {
        //     lieyou_SdkManager.showSpotByFinish();
        // }
    };
    UiSign.prototype.onGet = function () {
        if (!this._checkCanBonus()) {
            Msg_1.default.Show("今日奖励领取完毕，请明日再来");
            return;
        }
        var curDate = new Date();
        CocosZ_1.cocosz.dataMgr.LastBonusTime = curDate.toDateString();
        cc.log(CocosZ_1.cocosz.dataMgr.SkinVedioNum, "cocosz.dataMgr.SkinVedioNum");
        CocosZ_1.cocosz.dataMgr.CoinCount += 500;
        Msg_1.default.Show("恭喜获得500金币");
    };
    UiSign.prototype.onBack = function () {
        var _this = this;
        cc.tween(this.scaleNode)
            .to(0.2, { scale: 0 })
            .call(function () {
            _this._page.destroy();
        })
            .start();
    };
    UiSign.prototype.onClose = function () {
        cc.game.targetOff(this);
    };
    UiSign.prototype.onDestroy = function () {
        cc.game.targetOff(this);
    };
    UiSign.prototype._getRanDom = function () {
        var num = Math.random();
        if (num > 0.8) {
            return 0;
        }
        else if (num > 0.65) {
            return 1;
        }
        else if (num > 0.5) {
            return 2;
        }
        else if (num > 0.3) {
            return 3;
        }
        else if (num > 0.2) {
            return 4;
        }
        else if (num > 0.1) {
            return 5;
        }
        else if (num > 0.02) {
            return 6;
        }
        else if (num > 0) {
            return 7;
        }
    };
    UiSign = __decorate([
        ccclass
    ], UiSign);
    return UiSign;
}(UIPage_1.default));
exports.default = UiSign;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0XFxVaVxcVWlTaWduLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxtQ0FBOEI7QUFDOUIsOENBQTZDO0FBQzdDLGtEQUFrRDtBQUNsRCx3Q0FBbUM7QUFFN0IsSUFBQSxrQkFBcUMsRUFBbkMsb0JBQU8sRUFBRSxzQkFBMEIsQ0FBQztBQUc1QztJQUFvQywwQkFBTTtJQXNCdEM7UUFBQSxZQUNJLGlCQUFPLFNBRVY7UUF2QkQsZUFBUyxHQUFZLElBQUksQ0FBQztRQUMxQixZQUFNLEdBQVksSUFBSSxDQUFBO1FBQ3RCLGFBQU8sR0FBWSxJQUFJLENBQUM7UUFJeEIsU0FBRyxHQUFZLElBQUksQ0FBQztRQUNwQixVQUFJLEdBQVksSUFBSSxDQUFDO1FBQ3JCLFVBQUksR0FBWSxJQUFJLENBQUM7UUFDckIsVUFBSSxHQUFZLElBQUksQ0FBQztRQUNyQixVQUFJLEdBQVksSUFBSSxDQUFDO1FBQ3JCLFNBQUcsR0FBWSxJQUFJLENBQUM7UUFFcEIsVUFBSSxHQUFZLElBQUksQ0FBQztRQUNyQixXQUFLLEdBQVksSUFBSSxDQUFDO1FBQ3RCLFdBQUssR0FBWSxJQUFJLENBQUM7UUFDdEIsU0FBRyxHQUFXLElBQUksQ0FBQztRQU1mLEtBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQzs7SUFDakIsQ0FBQztJQUVPLHNCQUFLLEdBQWI7UUFDSSxJQUFJLElBQUksR0FBYyxlQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxvQkFBUyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEUsSUFBSSxJQUFJLEVBQUU7WUFDTixJQUFJLElBQUksR0FBWSxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3pDLElBQUksSUFBSSxFQUFFO2dCQUNOLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO2dCQUNsQixFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FB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QUM7UUFDekIsQ0FBQyxDQUFDO2FBQ0QsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztJQUVTLHdCQUFPLEdBQWpCO1FBQ0ksRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUVTLDBCQUFTLEdBQW5CO1FBQ0ksRUFBRSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUdPLDJCQUFVLEdBQWxCO1FBQ0ksSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hCLElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRTtZQUNYLE9BQU8sQ0FBQyxDQUFDO1NBQ1o7YUFDSSxJQUFJLEdBQUcsR0FBRyxJQUFJLEVBQUU7WUFDakIsT0FBTyxDQUFDLENBQUM7U0FDWjthQUNJLElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRTtZQUNoQixPQUFPLENBQUMsQ0FBQztTQUNaO2FBQ0ksSUFBSSxHQUFHLEdBQUcsR0FBRyxFQUFFO1lBQ2hCLE9BQU8sQ0FBQyxDQUFDO1NBQ1o7YUFDSSxJQUFJLEdBQUcsR0FBRyxHQUFHLEVBQUU7WUFDaEIsT0FBTyxDQUFDLENBQUM7U0FDWjthQUNJLElBQUksR0FBRyxHQUFHLEdBQUcsRUFBRTtZQUNoQixPQUFPLENBQUMsQ0FBQztTQUNaO2FBQ0ksSUFBSSxHQUFHLEdBQUcsSUFBSSxFQUFFO1lBQ2pCLE9BQU8sQ0FBQyxDQUFDO1NBQ1o7YUFDSSxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUU7WUFDZCxPQUFPLENBQUMsQ0FBQztTQUNaO0lBRUwsQ0FBQztJQWpQZ0IsTUFBTTtRQUQxQixPQUFPO09BQ2EsTUFBTSxDQWtQMUI7SUFBRCxhQUFDO0NBbFBELEFBa1BDLENBbFBtQyxnQkFBTSxHQWtQekM7a0JBbFBvQixNQUFNIiwiZmlsZSI6IiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFVJUGFnZSBmcm9tIFwiLi9VSVBhZ2VcIjtcclxuaW1wb3J0IHsgY29jb3N6IH0gZnJvbSBcIi4uL0ZyYW1ld29yay9Db2Nvc1pcIjtcclxuaW1wb3J0IHsgUGFuZWxOYW1lIH0gZnJvbSBcIi4uL0ZyYW1ld29yay9Db25zdGFudFwiO1xyXG5pbXBvcnQgTXNnIGZyb20gXCIuLi9GcmFtZXdvcmsvTXNnXCI7XHJcblxyXG5jb25zdCB7IGNjY2xhc3MsIHByb3BlcnR5IH0gPSBjYy5fZGVjb3JhdG9yO1xyXG5cclxuQGNjY2xhc3NcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVWlTaWduIGV4dGVuZHMgVUlQYWdlIHtcclxuXHJcbiAgICBzY2FsZU5vZGU6IGNjLk5vZGUgPSBudWxsO1xyXG4gICAgYnRuR2V0OiBjYy5Ob2RlID0gbnVsbFxyXG4gICAgYnRuQmFjazogY2MuTm9kZSA9IG51bGw7XHJcblxyXG5cclxuXHJcbiAgICBsaWI6IGNjLk5vZGUgPSBudWxsO1xyXG4gICAgbGliMTogY2MuTm9kZSA9IG51bGw7XHJcbiAgICBsaWIyOiBjYy5Ob2RlID0gbnVsbDtcclxuICAgIHByb3A6IGNjLk5vZGUgPSBudWxsO1xyXG4gICAgdGV4dDogY2MuTm9kZSA9IG51bGw7XHJcbiAgICBib3g6IGNjLk5vZGUgPSBudWxsO1xyXG5cclxuICAgIGhhbG86IGNjLk5vZGUgPSBudWxsO1xyXG4gICAgaGFsbzI6IGNjLk5vZGUgPSBudWxsO1xyXG4gICAgaGFsbzM6IGNjLk5vZGUgPSBudWxsO1xyXG4gICAgbnVtOiBudW1iZXIgPSBudWxsO1xyXG5cclxuXHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfaW5pdCgpIHtcclxuICAgICAgICBsZXQgR2FtZTogY2MuUHJlZmFiID0gY29jb3N6LnJlc01nci5nZXRSZXMoUGFuZWxOYW1lLlVpU2lnbiwgY2MuUHJlZmFiKTtcclxuICAgICAgICBpZiAoR2FtZSkge1xyXG4gICAgICAgICAgICBsZXQgbm9kZTogY2MuTm9kZSA9IGNjLmluc3RhbnRpYXRlKEdhbWUpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZSA9IG5vZGU7XHJcbiAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3VpXCIpLmFkZENoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5wb3NpdGlvbiA9IGNjLlZlYzIuWkVSTztcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBfb25Mb2FkKCkge1xyXG4gICAgICAgIHRoaXMuc2NhbGVOb2RlID0gdGhpcy5fcGFnZS5nZXRDaGlsZEJ5TmFtZShcInNjYWxlTm9kZVwiKTtcclxuICAgICAgICB0aGlzLmJ0bkdldCA9IHRoaXMuc2NhbGVOb2RlLmdldENoaWxkQnlOYW1lKFwiYnRuX2dldFwiKTtcclxuICAgICAgICB0aGlzLnByb3AgPSB0aGlzLnNjYWxlTm9kZS5nZXRDaGlsZEJ5TmFtZShcInByb3BcIik7XHJcbiAgICAgICAgdGhpcy5idG5CYWNrID0gdGhpcy5zY2FsZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJidG5fYmFja1wiKTtcclxuICAgICAgICB0aGlzLmhhbG8gPSB0aGlzLnNjYWxlTm9kZS5nZXRDaGlsZEJ5TmFtZShcImdpZnRfaWNvbl9oYWxvXCIpO1xyXG4gICAgICAgIHRoaXMuaGFsbzIgPSB0aGlzLnNjYWxlTm9kZS5nZXRDaGlsZEJ5TmFtZShcImdpZnRfaWNvbl9oYWxvMlwiKTtcclxuICAgICAgICB0aGlzLmhhbG8zID0gdGhpcy5zY2FsZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJnaWZ0X2ljb25faGFsbzJcIikuZ2V0Q2hpbGRCeU5hbWUoXCJnaWZ0X2ljb25faGFsbzNcIik7XHJcblxyXG4gICAgICAgIHRoaXMubGliID0gdGhpcy5zY2FsZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJsaWRcIik7XHJcbiAgICAgICAgdGhpcy5saWIxID0gdGhpcy5zY2FsZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJsaWRcIikuZ2V0Q2hpbGRCeU5hbWUoXCJnaWZ0X2ljb25fbGlkXzFcIik7XHJcbiAgICAgICAgdGhpcy5saWIyID0gdGhpcy5zY2FsZU5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJsaWRcIikuZ2V0Q2hpbGRCeU5hbWUoXCJnaWZ0X2ljb25fbGlkXzJcIik7XHJcbiAgICAgICAgdGhpcy5ib3ggPSB0aGlzLnNjYWxlTm9kZS5nZXRDaGlsZEJ5TmFtZShcImxpZFwiKS5nZXRDaGlsZEJ5TmFtZShcImdpZnRfaWNvbl9ib3hcIik7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIHRoaXMuX1N0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICBwcml2YXRlIF9jaGVja0NhbkJvbnVzKCkge1xyXG4gICAgICAgIGxldCBjdXJEYXRlID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgbGV0IGEgPSBjdXJEYXRlLnRvRGF0ZVN0cmluZygpICE9IGNvY29zei5kYXRhTWdyLkxhc3RCb251c1RpbWU7XHJcblxyXG4gICAgICAgIC8vIGNvY29zei5kYXRhTWdyLkxhc3RCb251c1RpbWUgPSBjdXJEYXRlLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIHJldHVybiBhXHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgX1N0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuYnRuQmFjay5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkJhY2soKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmJ0bkdldC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vbkdldCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgIGlmICgoY2Muc3lzLnBsYXRmb3JtID09PSBjYy5zeXMuVklWT19HQU1FKSkge1xyXG4gICAgICAgICAgICBsaWV5b3VfU2RrTWFuYWdlci5zaG93U3BvdEJ5UGF1c2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2Muc3lzLnBsYXRmb3JtID09PSBjYy5zeXMuT1BQT19HQU1FKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NhbGVOb2RlLnggPSAtMzQxO1xyXG4gICAgICAgICAgICBsZXQgc3AgPSBjb2Nvc3oucmVzTWdyLmdldFJlcyhcInNzXCIsIGNjLlNwcml0ZUZyYW1lKVxyXG4gICAgICAgICAgICBsaWV5b3VfU2RrTWFuYWdlci5zaG93TmF0aXZlQWRfYmlnKHtcclxuICAgICAgICAgICAgICAgIG5vZGU6IHRoaXMuc2NhbGVOb2RlLmdldENoaWxkQnlOYW1lKFwibmF0aXZlUG9zXCIpLCBcInRpdGxlQ29sb3JcIjogY2MuY29sb3IoMjU1LCAyNTUsIDI1NSwgMjU1LCksXHJcbiAgICAgICAgICAgICAgICBcImRlc2NDb2xvclwiOiBjYy5jb2xvcigyNTUsIDI1NSwgMjU1LCAyNTUsKSwgYmdQYXRoOiAndGV4dHVyZS9zcycsIHRleHR1cmU6IHNwLCBzY2FsZTogMC45LCBpbnNldFRvcDogMTAsIGluc2V0Qm90dG9tOiAxMCwgaW5zZXRMZWZ0OiAxMCwgaW5zZXRSaWdodDogMTBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBvbk9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5zY2FsZU5vZGUuc2NhbGUgPSAwO1xyXG4gICAgICAgIHRoaXMuYnRuR2V0LnNjYWxlID0gMDtcclxuXHJcbiAgICAgICAgLy8gaWYgKChjYy5zeXMucGxhdGZvcm0gPT09IGNjLnN5cy5WSVZPX0dBTUUgfHwgY2Muc3lzLnBsYXRmb3JtID09PSBjYy5zeXMuT1BQT19HQU1FKSkge1xyXG4gICAgICAgIC8vICAgICBsaWV5b3VfU2RrTWFuYWdlci5oaWRlQmFubmVyKCk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGNjLnR3ZWVuKHRoaXMuc2NhbGVOb2RlKVxyXG4gICAgICAgICAgICAudG8oMC4yLCB7IHNjYWxlOiAxLjQgfSlcclxuICAgICAgICAgICAgLnRvKDAuMSwgeyBzY2FsZTogMSB9KVxyXG4gICAgICAgICAgICAuY2FsbCgoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgY2MudHdlZW4odGhpcy5saWIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMTUsIHsgYW5nbGU6IDEwIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMTUsIHsgYW5nbGU6IC0xMCB9KVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAuYnkoMC4xLCB7IGFuZ2xlOiA5IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMSwgeyBhbmdsZTogLTkgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMDcsIHsgYW5nbGU6IDggfSlcclxuICAgICAgICAgICAgICAgICAgICAuYnkoMC4wNywgeyBhbmdsZTogLTggfSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMDcsIHsgYW5nbGU6IDcgfSlcclxuICAgICAgICAgICAgICAgICAgICAuYnkoMC4wNywgeyBhbmdsZTogLTcgfSlcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC5ieSgwLjA3LCB7IGFuZ2xlOiA2IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMDcsIHsgYW5nbGU6IC02IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmJ5KDAuMDcsIHsgYW5nbGU6IDUgfSlcclxuICAgICAgICAgICAgICAgICAgICAuc3RhcnQoKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZGVsYXkoMSlcclxuXHJcbiAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNjLnR3ZWVuKHRoaXMubGliMSlcclxuICAgICAgICAgICAgICAgICAgICAuYnkoMSwgeyBwb3NpdGlvbjogY2MudjIoMCwgMTUwKSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saWIxLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3AuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wLnNjYWxlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy50ZXh0LmFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy50d2Vlbih0aGlzLnByb3ApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudG8oMC4yLCB7IHNjYWxlOiAxIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhcnQoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdGFydCgpXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5saWIyLnkgKz0gMTUwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNjLnR3ZWVuKHRoaXMuaGFsbzIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvKDEsIHsgb3BhY2l0eTogMjU1LCBzY2FsZTogMi41IH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpYjIuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYWxvLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudG8oMSwgeyBvcGFjaXR5OiAwLCBzY2FsZTogMSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdGFydCgpXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBjYy50d2Vlbih0aGlzLmJ0bkdldClcclxuICAgICAgICAgICAgICAgICAgICAudG8oMC43LCB7IHNjYWxlOiAxIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnN0YXJ0KClcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXJ0KCk7XHJcblxyXG4gICAgICAgIGNjLnR3ZWVuKHRoaXMuaGFsbylcclxuICAgICAgICAgICAgLnJlcGVhdEZvcmV2ZXIoXHJcbiAgICAgICAgICAgICAgICBjYy50d2VlbigpLmJ5KDMsIHsgYW5nbGU6IDM2MCB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5zdGFydCgpXHJcbiAgICAgICAgY2MudHdlZW4odGhpcy5oYWxvMylcclxuICAgICAgICAgICAgLnJlcGVhdEZvcmV2ZXIoXHJcbiAgICAgICAgICAgICAgICBjYy50d2VlbigpLmJ5KDMsIHsgYW5nbGU6IDM2MCB9KVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC5zdGFydCgpXHJcblxyXG5cclxuICAgICAgICAvLyBsaWV5b3VfU2RrTWFuYWdlci5zaG93QmFubmVyQnlCb3R0b20oKTtcclxuXHJcbiAgICAgICAgLy8gaWYgKGNjLnN5cy5wbGF0Zm9ybSA9PT0gY2Muc3lzLlZJVk9fR0FNRSkge1xyXG4gICAgICAgIC8vICAgICBsaWV5b3VfU2RrTWFuYWdlci5zaG93U3BvdEJ5RmluaXNoKCk7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJvdGVjdGVkIG9uR2V0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY2hlY2tDYW5Cb251cygpKSB7XHJcbiAgICAgICAgICAgIE1zZy5TaG93KFwi5LuK5pel5aWW5Yqx6aKG5Y+W5a6M5q+V77yM6K+35piO5pel5YaN5p2lXCIpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGN1ckRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvY29zei5kYXRhTWdyLkxhc3RCb251c1RpbWUgPSBjdXJEYXRlLnRvRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGNjLmxvZyhjb2Nvc3ouZGF0YU1nci5Ta2luVmVkaW9OdW0sIFwiY29jb3N6LmRhdGFNZ3IuU2tpblZlZGlvTnVtXCIpO1xyXG4gICAgICAgIGNvY29zei5kYXRhTWdyLkNvaW5Db3VudCArPSA1MDA7XHJcbiAgICAgICAgTXNnLlNob3coXCLmga3llpzojrflvpc1MDDph5HluIFcIilcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25CYWNrKCkge1xyXG4gICAgICAgIGNjLnR3ZWVuKHRoaXMuc2NhbGVOb2RlKVxyXG4gICAgICAgICAgICAudG8oMC4yLCB7IHNjYWxlOiAwIH0pXHJcbiAgICAgICAgICAgIC5jYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2UuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25DbG9zZSgpIHtcclxuICAgICAgICBjYy5nYW1lLnRhcmdldE9mZih0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgb25EZXN0cm95KCkge1xyXG4gICAgICAgIGNjLmdhbWUudGFyZ2V0T2ZmKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwcml2YXRlIF9nZXRSYW5Eb20oKSB7XHJcbiAgICAgICAgbGV0IG51bSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgaWYgKG51bSA+IDAuOCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobnVtID4gMC42NSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobnVtID4gMC41KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChudW0gPiAwLjMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG51bSA+IDAuMikge1xyXG4gICAgICAgICAgICByZXR1cm4gNDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobnVtID4gMC4xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA1O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChudW0gPiAwLjAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA2O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChudW0gPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiA3O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuIl19